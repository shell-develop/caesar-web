(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60a52bd6"],{"058d":function(t,e){ace.define("ace/snippets/xml",["require","exports","module"],(function(t,e,a){"use strict";e.snippetText=void 0,e.scope="xml"}))},"0696":function(t,e,a){ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,a){"use strict";var i=t("../lib/oop"),n=t("./text_highlight_rules").TextHighlightRules,o=function(t){var e="[_:a-zA-ZÀ-￿][-_:.a-zA-Z0-9À-￿]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+e+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:e},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+e+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"--\x3e",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+e+":)?"+e+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===o&&this.normalizeRules()};(function(){this.embedTagRules=function(t,e,a){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+a+".tag-name.xml"],regex:"(<)("+a+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:e+"start"}]}),this.$rules[a+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(t,e,a){return a.splice(0),this.token}}],this.embedRules(t,e,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+a+".tag-name.xml"],regex:"(</)("+a+"(?=\\s|>|$))",next:a+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(n.prototype),i.inherits(o,n),e.XmlHighlightRules=o})),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,a){"use strict";var i=t("../../lib/oop"),n=t("../behaviour").Behaviour,o=t("../../token_iterator").TokenIterator;t("../../lib/lang");function r(t,e){return t.type.lastIndexOf(e+".xml")>-1}var l=function(){this.add("string_dquotes","insertion",(function(t,e,a,i,n){if('"'==n||"'"==n){var l=n,s=i.doc.getTextRange(a.getSelectionRange());if(""!==s&&"'"!==s&&'"'!=s&&a.getWrapBehavioursEnabled())return{text:l+s+l,selection:!1};var c=a.getCursorPosition(),u=i.doc.getLine(c.row),d=u.substring(c.column,c.column+1),p=new o(i,c.row,c.column),m=p.getCurrentToken();if(d==l&&(r(m,"attribute-value")||r(m,"string")))return{text:"",selection:[1,1]};if(m||(m=p.stepBackward()),!m)return;while(r(m,"tag-whitespace")||r(m,"whitespace"))m=p.stepBackward();var b=!d||d.match(/\s/);if(r(m,"attribute-equals")&&(b||">"==d)||r(m,"decl-attribute-equals")&&(b||"?"==d))return{text:l+l,selection:[1,1]}}})),this.add("string_dquotes","deletion",(function(t,e,a,i,n){var o=i.doc.getTextRange(n);if(!n.isMultiLine()&&('"'==o||"'"==o)){var r=i.doc.getLine(n.start.row),l=r.substring(n.start.column+1,n.start.column+2);if(l==o)return n.end.column++,n}})),this.add("autoclosing","insertion",(function(t,e,a,i,n){if(">"==n){var l=a.getSelectionRange().start,s=new o(i,l.row,l.column),c=s.getCurrentToken()||s.stepBackward();if(!c||!(r(c,"tag-name")||r(c,"tag-whitespace")||r(c,"attribute-name")||r(c,"attribute-equals")||r(c,"attribute-value")))return;if(r(c,"reference.attribute-value"))return;if(r(c,"attribute-value")){var u=c.value.charAt(0);if('"'==u||"'"==u){var d=c.value.charAt(c.value.length-1),p=s.getCurrentTokenColumn()+c.value.length;if(p>l.column||p==l.column&&u!=d)return}}while(!r(c,"tag-name"))if(c=s.stepBackward(),"<"==c.value){c=s.stepForward();break}var m=s.getCurrentTokenRow(),b=s.getCurrentTokenColumn();if(r(s.stepBackward(),"end-tag-open"))return;var f=c.value;if(m==l.row&&(f=f.substring(0,l.column-b)),this.voidElements.hasOwnProperty(f.toLowerCase()))return;return{text:"></"+f+">",selection:[1,1]}}})),this.add("autoindent","insertion",(function(t,e,a,i,n){if("\n"==n){var r=a.getCursorPosition(),l=i.getLine(r.row),s=new o(i,r.row,r.column),c=s.getCurrentToken();if(c&&-1!==c.type.indexOf("tag-close")){if("/>"==c.value)return;while(c&&-1===c.type.indexOf("tag-name"))c=s.stepBackward();if(!c)return;var u=c.value,d=s.getCurrentTokenRow();if(c=s.stepBackward(),!c||-1!==c.type.indexOf("end-tag"))return;if(this.voidElements&&!this.voidElements[u]){var p=i.getTokenAt(r.row,r.column+1),m=(l=i.getLine(d),this.$getIndent(l)),b=m+i.getTabString();return p&&"</"===p.value?{text:"\n"+b+"\n"+m,selection:[1,b.length,1,b.length]}:{text:"\n"+b}}}}}))};i.inherits(l,n),e.XmlBehaviour=l})),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],(function(t,e,a){"use strict";var i=t("../../lib/oop"),n=(t("../../lib/lang"),t("../../range").Range),o=t("./fold_mode").FoldMode,r=t("../../token_iterator").TokenIterator,l=e.FoldMode=function(t,e){o.call(this),this.voidElements=t||{},this.optionalEndTags=i.mixin({},this.voidElements),e&&i.mixin(this.optionalEndTags,e)};i.inherits(l,o);var s=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};function c(t,e){return t.type.lastIndexOf(e+".xml")>-1}(function(){this.getFoldWidget=function(t,e,a){var i=this._getFirstTagInLine(t,a);return i?i.closing||!i.tagName&&i.selfClosing?"markbeginend"==e?"end":"":!i.tagName||i.selfClosing||this.voidElements.hasOwnProperty(i.tagName.toLowerCase())?"":this._findEndTagInLine(t,a,i.tagName,i.end.column)?"":"start":this.getCommentFoldWidget(t,a)},this.getCommentFoldWidget=function(t,e){return/comment/.test(t.getState(e))&&/<!-/.test(t.getLine(e))?"start":""},this._getFirstTagInLine=function(t,e){for(var a=t.getTokens(e),i=new s,n=0;n<a.length;n++){var o=a[n];if(c(o,"tag-open")){if(i.end.column=i.start.column+o.value.length,i.closing=c(o,"end-tag-open"),o=a[++n],!o)return null;for(i.tagName=o.value,i.end.column+=o.value.length,n++;n<a.length;n++)if(o=a[n],i.end.column+=o.value.length,c(o,"tag-close")){i.selfClosing="/>"==o.value;break}return i}if(c(o,"tag-close"))return i.selfClosing="/>"==o.value,i;i.start.column+=o.value.length}return null},this._findEndTagInLine=function(t,e,a,i){for(var n=t.getTokens(e),o=0,r=0;r<n.length;r++){var l=n[r];if(o+=l.value.length,!(o<i)&&c(l,"end-tag-open")&&(l=n[r+1],l&&l.value==a))return!0}return!1},this._readTagForward=function(t){var e=t.getCurrentToken();if(!e)return null;var a=new s;do{if(c(e,"tag-open"))a.closing=c(e,"end-tag-open"),a.start.row=t.getCurrentTokenRow(),a.start.column=t.getCurrentTokenColumn();else if(c(e,"tag-name"))a.tagName=e.value;else if(c(e,"tag-close"))return a.selfClosing="/>"==e.value,a.end.row=t.getCurrentTokenRow(),a.end.column=t.getCurrentTokenColumn()+e.value.length,t.stepForward(),a}while(e=t.stepForward());return null},this._readTagBackward=function(t){var e=t.getCurrentToken();if(!e)return null;var a=new s;do{if(c(e,"tag-open"))return a.closing=c(e,"end-tag-open"),a.start.row=t.getCurrentTokenRow(),a.start.column=t.getCurrentTokenColumn(),t.stepBackward(),a;c(e,"tag-name")?a.tagName=e.value:c(e,"tag-close")&&(a.selfClosing="/>"==e.value,a.end.row=t.getCurrentTokenRow(),a.end.column=t.getCurrentTokenColumn()+e.value.length)}while(e=t.stepBackward());return null},this._pop=function(t,e){while(t.length){var a=t[t.length-1];if(e&&a.tagName!=e.tagName){if(this.optionalEndTags.hasOwnProperty(a.tagName)){t.pop();continue}return null}return t.pop()}},this.getFoldWidgetRange=function(t,e,a){var i=this._getFirstTagInLine(t,a);if(!i)return this.getCommentFoldWidget(t,a)&&t.getCommentFoldRange(a,t.getLine(a).length);var o,l=i.closing||i.selfClosing,s=[];if(l){u=new r(t,a,i.end.column);var c={row:a,column:i.start.column};while(o=this._readTagBackward(u)){if(o.selfClosing){if(s.length)continue;return o.start.column+=o.tagName.length+2,o.end.column-=2,n.fromPoints(o.start,o.end)}if(o.closing)s.push(o);else if(this._pop(s,o),0==s.length)return o.start.column+=o.tagName.length+2,o.start.row==o.end.row&&o.start.column<o.end.column&&(o.start.column=o.end.column),n.fromPoints(o.start,c)}}else{var u=new r(t,a,i.start.column),d={row:a,column:i.start.column+i.tagName.length+2};i.start.row==i.end.row&&(d.column=i.end.column);while(o=this._readTagForward(u)){if(o.selfClosing){if(s.length)continue;return o.start.column+=o.tagName.length+2,o.end.column-=2,n.fromPoints(o.start,o.end)}if(o.closing){if(this._pop(s,o),0==s.length)return n.fromPoints(d,o.start)}else s.push(o)}}}}).call(l.prototype)})),ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml","ace/worker/worker_client"],(function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("../lib/lang"),r=t("./text").Mode,l=t("./xml_highlight_rules").XmlHighlightRules,s=t("./behaviour/xml").XmlBehaviour,c=t("./folding/xml").FoldMode,u=t("../worker/worker_client").WorkerClient,d=function(){this.HighlightRules=l,this.$behaviour=new s,this.foldingRules=new c};n.inherits(d,r),function(){this.voidElements=o.arrayToMap([]),this.blockComment={start:"\x3c!--",end:"--\x3e"},this.createWorker=function(t){var e=new u(["ace"],a("275b"),"Worker");return e.attachToDocument(t.getDocument()),e.on("error",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/xml"}.call(d.prototype),e.Mode=d}))},"0714":function(t,e,a){"use strict";var i=a("b255"),n=a.n(i);n.a},"0970":function(t,e,a){"use strict";a.d(e,"k",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"j",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"i",(function(){return p})),a.d(e,"l",(function(){return m})),a.d(e,"h",(function(){return b})),a.d(e,"d",(function(){return f})),a.d(e,"e",(function(){return h}));var i=a("9bd2"),n="/job";function o(t){return Object(i["a"])({url:n+"/ci/build/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/cd/build/page/query",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/ci/build",method:"post",data:t})}function s(t){return Object(i["a"])({url:n+"/ci/build/abort?ciBuildId="+t,method:"put"})}function c(t){return Object(i["a"])({url:n+"/cd/build",method:"post",data:t})}function u(t){return Object(i["a"])({url:n+"/ci/build/query?buildId="+t,method:"get"})}function d(t){return Object(i["a"])({url:n+"/cd/build/query?buildId="+t,method:"get"})}function p(t){return Object(i["a"])({url:n+"/ci/build/artifact/query",method:"post",data:t})}function m(t){return Object(i["a"])({url:n+"/build/output/view",method:"post",data:t})}function b(t){return Object(i["a"])({url:n+"/cd/host/pattern/query?cdJobId="+t,method:"get"})}function f(t){return Object(i["a"])({url:n+"/ci/engine/correction?ciJobId="+t,method:"get"})}function h(t){return Object(i["a"])({url:n+"/cd/engine/correction?cdJobId="+t,method:"get"})}},"0dc4":function(t,e,a){"use strict";var i=a("544c"),n=a.n(i);n.a},1219:function(t,e,a){"use strict";var i=a("a225"),n=a.n(i);n.a},1379:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.changes.length&&t.changes.length>0,expression:"changes.length !== null && changes.length > 0"}],staticClass:"tag-group"},t._l(t.changes,(function(e){return a("div",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.commitId,placement:"top-start"}},[a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerOpenUrl(e)}}},[t._v(t._s(e.shortCommitId))])],1),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.commitMsg))])],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:null===t.changes||0===t.changes.length,expression:"changes === null || changes.length === 0"}]},[t._v("No Changes")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"变更详情",placement:"top-start"}},[a("i",{staticClass:"fa fa-comment-o",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},n=[],o=a("c276"),r={name:"BuildChanges",data:function(){return{}},props:["changes"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(t){o["a"].open(t.commitUrl)}}},l=r,s=(a("275c"),a("2877")),c=function(t){t.options.__source="src/components/opscloud/build/summary/BuildChanges.vue"},u=c,d=Object(s["a"])(l,i,n,!1,null,null,null);"function"===typeof u&&u(d);e["a"]=d.exports},"1c71":function(t,e,a){"use strict";var i=a("f43e"),n=a.n(i);n.a},"269b":function(t,e,a){},"275c":function(t,e,a){"use strict";var i=a("97ca"),n=a.n(i);n.a},"2d6d":function(t,e,a){},"2d7f":function(t,e,a){"use strict";var i=a("9fbf"),n=a.n(i);n.a},"336f":function(t,e,a){"use strict";var i=a("3ad6"),n=a.n(i);n.a},3452:function(t,e,a){"use strict";var i=a("6889"),n=a.n(i);n.a},"395e":function(t,e,a){"use strict";var i=a("7439"),n=a.n(i);n.a},"3ad6":function(t,e,a){},"3b66":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return c}));var i=a("9bd2"),n="/dingtalk";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/add",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/update",method:"put",data:t})}function s(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}function c(t){return Object(i["a"])({url:n+"/test?id="+t,method:"get"})}},4205:function(t,e,a){"use strict";var i=a("c835"),n=a.n(i);n.a},4903:function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"h",(function(){return l})),a.d(e,"l",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"d",(function(){return p})),a.d(e,"c",(function(){return m})),a.d(e,"j",(function(){return b})),a.d(e,"i",(function(){return f})),a.d(e,"k",(function(){return h}));var i=a("9bd2"),n="/jenkins/tpl";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/add",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/update",method:"put",data:t})}function s(t){return Object(i["a"])({url:n+"/write",method:"put",data:t})}function c(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}function u(t){return Object(i["a"])({url:n+"/instance/query?instanceId="+t,method:"get"})}function d(t){return Object(i["a"])({url:n+"/read?id="+t,method:"get"})}function p(t){return Object(i["a"])({url:n+"/ci/job/page/query",method:"post",data:t})}function m(t){return Object(i["a"])({url:n+"/cd/job/page/query",method:"post",data:t})}function b(t){return Object(i["a"])({url:n+"/ci/job/upgrade?jobId="+t,method:"get"})}function f(t){return Object(i["a"])({url:n+"/cd/job/upgrade?jobId="+t,method:"get"})}function h(t){return Object(i["a"])({url:n+"/job/upgrade?tplId="+t,method:"get"})}},"4f80":function(t,e,a){"use strict";var i=a("b674"),n=a.n(i);n.a},"544c":function(t,e,a){},5505:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.executors.length&&t.executors.length>0,expression:"executors.length !== null && executors.length > 0"}],staticClass:"tag-group"},t._l(t.executors,(function(e){return a("div",{key:e.id},[a("b",{staticClass:"label"},[t._v(t._s(e.nodeName))]),null!==e.privateIp&&""!==e.privateIp?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.privateIp))]):t._e()])})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:null===t.executors.length||0===t.executors.length,expression:"executors.length === null || executors.length === 0"}]},[t._v("No Executors")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[a("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)],1)},n=[],o={name:"BuildExecutors",data:function(){return{}},props:["executors"],filters:{},mounted:function(){},methods:{}},r=o,l=(a("0714"),a("2877")),s=function(t){t.options.__source="src/components/opscloud/build/summary/BuildExecutors.vue"},c=s,u=Object(l["a"])(r,i,n,!1,null,"a2a68b44",null);"function"===typeof c&&c(u);e["a"]=u.exports},5672:function(t,e,a){},"573a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",[a("h1",[t._v(t._s(t.title))]),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:7}},[a("el-card",{attrs:{shadow:"hover"}},[a("my-application-table",{ref:"myApplicationTable",on:{handlerSelApplication:t.handlerSelApplication}})],1)],1),a("el-col",{attrs:{span:17}},[a("announcement-carousel"),a("block-platform-status"),a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.buildType,expression:"buildType"}],attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("All build jobs")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"45px"},attrs:{type:"primary"},on:{click:t.handlerSwitch}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}}),t._v("SWITCH ")])],1),a("my-ci-job-table",{ref:"myCiJobTable"})],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!t.buildType,expression:"!buildType"}],attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("All deploy jobs")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"45px"},attrs:{type:"primary"},on:{click:t.handlerSwitch}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}}),t._v("SWITCH ")])],1),a("my-cd-job-table",{ref:"myCdJobTable"})],1),a("jenkins-engine-status",{staticStyle:{"margin-top":"10px"}})],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[a("el-input",{staticClass:"input",attrs:{placeholder:"输入关键字模糊查询"},model:{value:t.queryParam.queryName,callback:function(e){t.$set(t.queryParam,"queryName",e)},expression:"queryParam.queryName"}}),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.fetchData}},[t._v("查询")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"key"}},[a("el-tag",{attrs:{"disable-transitions":"",type:"primary",plain:"",size:"mini"}},[t._v(t._s(e.row.applicationKey))])],1)],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"应用名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.comment,placement:"top-start"}},[a("span",[t._v(t._s(e.row.name))])]),a("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return a("span",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0),a("el-rate",{on:{change:function(a){return t.handlerSetApplicationRate(e.row)}},model:{value:e.row.userPermission.rate,callback:function(a){t.$set(e.row.userPermission,"rate",a)},expression:"props.row.userPermission.rate"}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",plain:""},on:{click:function(a){return t.handlerRowSel(e.row)}}},[a("i",{staticClass:"el-icon-search"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[a("span",{on:{click:function(a){return t.handlerRowPermissionEdit(e.row)}}},[t._v("权限配置")])])],1)],1)]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),a("ApplicationDialog",{ref:"applicationDialog",attrs:{formStatus:t.formStatus},on:{closeDialog:t.fetchData}}),a("ApplicationPermissionDialog",{ref:"applicationPermissionDialog",attrs:{formStatus:t.formPermissionStatus},on:{closeDialog:t.fetchData}})],1)},r=[],l=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),s=a("5880"),c=a("b3eb"),u=a("81ce"),d=a("65ce");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"MyApplicationTable",data:function(){return{title:"应用管理",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{instanceId:"",queryName:""},formStatus:{visible:!1,operationType:!0,addTitle:"新增应用配置",updateTitle:"更新应用配置"},formPermissionStatus:{visible:!1}}},computed:m({},Object(s["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData()},components:{ApplicationDialog:c["a"],ApplicationPermissionDialog:u["a"]},methods:m({},Object(s["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},handlerRowSel:function(t){this.$emit("handlerSelApplication",t)},handlerRowEdit:function(t){this.formStatus.operationType=!1,this.formStatus.visible=!0,this.$refs.applicationDialog.initData(Object.assign({},t))},handlerRowPermissionEdit:function(t){this.formPermissionStatus.visible=!0,this.$refs.applicationPermissionDialog.initData(Object.assign({},t))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},handlerSetApplicationRate:function(t){var e=this,a={userPermissionId:t.userPermission.id,rate:t.userPermission.rate};Object(d["w"])(a).then((function(t){t.success&&e.fetchData()}))},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(d["o"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}})},f=b,h=(a("8956"),a("2877")),g=function(t){t.options.__source="src/components/opscloud/application/MyApplicationTable.vue"},v=g,y=Object(h["a"])(f,o,r,!1,null,null,null);"function"===typeof v&&v(y);var w=y.exports,x=a("cc9c"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[a("el-input",{staticClass:"input",attrs:{disabled:"",placeholder:"应用名称"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}}),a("el-input",{staticClass:"input",attrs:{placeholder:"输入任务名称查询"},model:{value:t.queryParam.queryName,callback:function(e){t.$set(t.queryParam,"queryName","string"===typeof e?e.trim():e)},expression:"queryParam.queryName"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{disabled:""===t.application},on:{click:t.fetchData}},[t._v("查询")]),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{disabled:""===t.application},on:{click:t.handlerAdd}},[t._v("新建任务")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.jobKey,placement:"top-start"}},[a("span",[t._v(t._s(e.row.name))])]),a("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return a("span",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}])}),a("el-table-column",{attrs:{prop:"branch",label:"首选分支",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),a("b",[t._v(t._s(e.row.branch))])]}}])}),a("el-table-column",{attrs:{prop:"sonarQube",label:"代码质量",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableSonar&&"{}"!=JSON.stringify(e.row.sonarQube.measures)?a("div",[a("sonar-popover",{attrs:{sonarQube:e.row.sonarQube}})],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"env",label:"环境",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{style:{color:e.row.env.color},attrs:{"disable-transitions":""}},[t._v(t._s(e.row.env.envName))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"最新构建",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",t._l(e.row.buildViews,(function(e){return a("el-button",{key:e.buildNumber,style:{backgroundColor:e.color,color:"#FFFFFF",width:"50px"}},[a("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("控制台")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.building,expression:"item.building"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerAbortBuild(e.executors)}}},[t._v("中止任务 ")])],1),a("el-form",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.executors.length>0,expression:"item.executors.length > 0"}]},[a("el-tag",{attrs:{type:"primary"}},[t._v("构建日志 "),a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerOpenViewBuildOutput(e.executors)}}},[a("span",{staticStyle:{color:"#535353"}},[t._v("查看")])])],1),a("el-divider"),t._l(e.executors,(function(e){return a("div",{key:e.id},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp)+" "),a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerOpenXTerm(e)}}},[a("span",{staticStyle:{color:"#535353"}},[t._v("打开终端")])])],1)],1)}))],2),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.executors.length,expression:"item.executors.length === 0"}]},[t._v("No Executors")])])],1),a("span",{attrs:{slot:"reference"},slot:"reference"},[e.building?a("i",{staticClass:"el-icon-loading"}):t._e(),t._v(t._s(e.buildNumber))])],1)],1)})),1)]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",{staticStyle:{"margin-right":"5px"}},[a("el-button",{attrs:{type:"primary",icon:"fa fa-play"},on:{click:function(a){return t.handlerRowRunBuild(e.row)}}}),0!==e.row.deploymentJobId?a("el-button",{attrs:{type:"primary",icon:"fa fa-cloud-upload"},on:{click:function(a){return t.handlerRowRunDeployment(e.row)}}}):t._e()],1),a("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(a){return t.handlerRowEdit(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"fa fa-plane"}},[a("span",{on:{click:function(a){return t.handlerRowEngineEdit(e.row)}}},[t._v("工作引擎")])]),a("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[a("span",{on:{click:function(a){return t.handlerRowDeploymentEdit(e.row)}}},[t._v("部署配置")])]),a("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[a("span",{on:{click:function(a){return t.handlerRowPermissionEdit(e.row)}}},[t._v("权限配置")])])],1)],1)]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),a("ciJobDialog",{ref:"ciJobDialog",attrs:{formStatus:t.formCiJobStatus},on:{closeDialog:t.fetchData}}),a("cdJobDialog",{ref:"cdJobDialog",attrs:{formStatus:t.formCdJobStatus},on:{closeDialog:t.fetchData}}),a("jobEngineDialog",{ref:"jobEngineDialog",attrs:{formStatus:t.formEngineStatus}}),a("h5JobBuildDialog",{ref:"h5JobBuildDialog",attrs:{formStatus:t.formH5BuildStatus}}),a("javaJobBuildDialog",{ref:"javaJobBuildDialog",attrs:{formStatus:t.formJavaBuildStatus}}),a("javaJobDeployDialog",{ref:"javaJobDeployDialog",attrs:{formStatus:t.formJavaDeployStatus}}),a("iOSJobBuildDialog",{ref:"iOSJobBuildDialog",attrs:{formStatus:t.formIOSBuildStatus}}),a("pythonJobBuildDialog",{ref:"pythonJobBuildDialog",attrs:{formStatus:t.formPythonBuildStatus}}),a("androidJobBuildDialog",{ref:"androidJobBuildDialog",attrs:{formStatus:t.formAndroidBuildStatus}}),a("androidReinforceJobBuildDialog",{ref:"androidReinforceJobBuildDialog",attrs:{formStatus:t.formAndroidReinforceBuildStatus}}),a("jenkinsNodeXTerm",{ref:"xtermDialog",attrs:{formStatus:t.formXtermStatus}}),a("viewJobBuildOutput",{ref:"viewJobBuildOutput",attrs:{formStatus:t.formBuildOutputStatus}}),a("ciJobPermissionDialog",{ref:"ciJobPermissionDialog",attrs:{formStatus:t.formPermissionStatus}})],1)},S=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"80%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},close:t.handlerExit}},[t._l(t.xterms,(function(e){return a("div",{key:e},[[a("el-col",{attrs:{span:24}},[a("el-alert",{staticStyle:{"margin-bottom":"5px"},attrs:{title:"常用命令",type:"success","show-icon":""}},[a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerSendCmd(0)}}},[t._v("[点击进入工作目录] cd "+t._s(t.executor.workspace)+" ")])],1),a("el-card",{staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{shadow:"hover","body-style":"padding: 2px"}},[a("div",{staticClass:"clearfix",staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[a("span",[a("el-tag",[t._v(" "+t._s(e))])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"退出",placement:"top-start"}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerLogout(e)}}},[t._v(" Logout ")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制会话",placement:"top-start"}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"20px"},attrs:{type:"text"},on:{click:function(e){return t.handlerDuplicateSession()}}},[t._v("Duplicate ")])],1)],1),a("div",{staticClass:"xterm",attrs:{id:e}})])],1)]],2)})),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.handlerExit}},[t._v("关闭")])],1)],2)},O=[],D=(a("d81d"),a("b0c0"),a("1276"),a("c276")),J=(a("abb2"),a("fcf3")),j=a("47d0"),T=a("e232"),C="ws/xterm",I="XTERM",B={data:function(){return{title:"Web-XTerminal",socketURI:"",executor:{},server:{},addonMap:[],xterms:[],xtermMap:{},timer:null,xtermSize:{rows:30},xtermTheme:{foreground:"#FFFFFF",background:"#606266",cursor:"help"}}},name:"JenkinsNodeXTerm",props:["formStatus"],mixins:[],mounted:function(){this.setXTermSetting(),this.initWebSocketURL()},beforeDestroy:function(){try{for(var t in this.socket.close(),this.xtermMap)this.xtermMap[t].dispose()}catch(e){}clearInterval(this.timer)},methods:{setXTermSetting:function(){var t=this;Object(T["a"])(I).then((function(e){if(e.success)try{t.xtermTheme.foreground=e.body["XTERM_FOREGROUND"],t.xtermTheme.background=e.body["XTERM_BACKGROUND"],t.xtermSize.rows=e.body["XTERM_ROWS"]||30}catch(a){}else t.$message.error(e.msg)}))},handlerExit:function(){this.handlerClose();try{for(var t in this.socket.close(),this.xtermMap)this.xtermMap[t].dispose()}catch(e){}this.formStatus.visible=!1},initData:function(t){this.executor=t,this.server=t.server,this.handlerLogin()},initWebSocketURL:function(){var t=window.location.host,e=window.location.href.split("://")[0],a=("http"===e?"ws":"wss")+"://"+t+"/cs/"+C;this.socketURI=a},setTimer:function(){var t=this;this.timer=setInterval((function(){t.handlerSSHHeartbeat()}),1e4)},handlerSSHHeartbeat:function(){var t={status:"HEARTBEAT"};try{this.socketOnSend(JSON.stringify(t))}catch(e){}},initTermInstance:function(t){var e=this,a=t.name,i=new J["Terminal"]({rendererType:"canvas",allowTransparency:!0,fontSize:11,rows:this.xtermSize.rows,theme:this.xtermTheme,termName:"xterm",visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,cancelEvents:!1,cursorStyle:"underline",cursorBlink:!0,convertEol:!0});e.addonMap[a]=new j["FitAddon"],i.loadAddon(e.addonMap[a]),i.open(document.getElementById(a)),e.addonMap[a].fit(),i.focus(),i.onData((function(t){var i={data:t,status:"COMMAND",instanceId:a};e.socketOnSend(JSON.stringify(i))})),this.xtermMap[a]=i},handlerResize:function(){for(var t in this.xtermMap){this.addonMap[t].fit();var e={status:"RESIZE",instanceId:t,xtermWidth:7*this.addonMap[t]._terminal.cols,xtermHeight:document.getElementById(t).clientHeight};this.socketOnSend(JSON.stringify(e)),this.xtermMap[t].scrollToBottom()}},handlerDuplicateSession:function(){var t=this,e=this.server.name+"#"+D["a"].uuid(),a={status:"DUPLICATE_SESSION_IP",duplicateInstanceId:this.server.name,token:D["a"].cookies.get("token"),instanceId:e,xtermWidth:7*this.addonMap[e.split("#")[0]]._terminal.cols,xtermHeight:document.getElementById(e.split("#")[0]).clientHeight};this.xterms.push(e);var i={name:e,ip:this.server.privateIp};this.$nextTick((function(){t.initTermInstance(i),t.socketOnSend(JSON.stringify(a))}))},handlerLogout:function(t){var e={status:"LOGOUT",instanceId:t};this.socketOnSend(JSON.stringify(e));var a=this.xtermMap[t];a.dispose(),delete this.xtermMap[t],this.xterms=this.xterms.filter((function(e){return e!==t})),this.$message.warning(t+"终端已关闭")},handlerClose:function(){var t={status:"CLOSE"};this.socketOnSend(JSON.stringify(t)),this.xterms=[],this.xtermMap={},clearInterval(this.timer)},handlerLogin:function(){this.xtermMap={},this.initSocket(),this.setTimer()},initSocket:function(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError(),this.socketOnMessage()},socketOnOpen:function(){var t=this;this.socket.onopen=function(){try{t.xterms=[],t.xterms.push(t.server.name),t.$nextTick((function(){t.initTermInstance(t.server);var e={token:D["a"].cookies.get("token"),instanceId:t.server.name,ip:t.server.privateIp,status:"INITIAL_IP",xtermWidth:0,xtermHeight:308};t.socketOnSend(JSON.stringify(e)),t.$nextTick((function(){t.handlerResize()}))}))}catch(e){t.$message.error("登录失败，未选择服务器或其它原因")}}},socketOnClose:function(){this.socket.onclose=function(){}},socketOnError:function(){this.socket.onerror=function(){}},socketOnSend:function(t){this.socket.send(t)},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){var a=JSON.parse(e.data),i=t;a.map((function(t){i.xtermMap[t.instanceId].write(t.output)}))}},handlerSendCmd:function(){for(var t in this.xtermMap){var e={data:"cd "+this.executor.workspace+"\n",status:"COMMAND",instanceId:t};this.socketOnSend(JSON.stringify(e))}}}},N=B,P=(a("4f80"),function(t){t.options.__source="src/components/opscloud/xterm/JenkinsNodeXTerm.vue"}),E=P,$=Object(h["a"])(N,k,O,!1,null,"78873a04",null);"function"===typeof E&&E($);var z=$.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务配置",name:"job"}},[a("el-form",{attrs:{model:t.application}},[a("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),a("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}})],1)],1),a("el-divider"),a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"任务key","label-width":t.labelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入内容(只允许使用a-zA-Z、0-9、-)",disabled:!t.formStatus.operationType},model:{value:t.ciJob.jobKey,callback:function(e){t.$set(t.ciJob,"jobKey",e)},expression:"ciJob.jobKey"}})],1),a("el-form-item",{attrs:{label:"任务类型","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.ciJob.jobType,callback:function(e){t.$set(t.ciJob,"jobType","string"===typeof e?e.trim():e)},expression:"ciJob.jobType"}},t._l(t.jobTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"代码仓库","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择"},on:{change:t.handlerSelScm},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1),a("el-checkbox",{staticStyle:{"margin-left":"20px"},on:{change:t.handlerSelScm},model:{value:t.ciJob.enableTag,callback:function(e){t.$set(t.ciJob,"enableTag",e)},expression:"ciJob.enableTag"}},[a("span",[t._v("允许标签(tag)构建")])])],1),a("el-form-item",{attrs:{label:"首选分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择",disabled:""===t.branchOptions||0===t.branchOptions.length},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"刷新分支",placement:"top"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.ciJob.scmMemberId,loading:t.branchesLoading},on:{click:t.handlerSelScm}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"创建默认发布分支",placement:"top"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.ciJob.scmMemberId,loading:t.branchesLoading},on:{click:t.handlerCreateBranch}},[a("i",{staticClass:"fa fa-git",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-form-item",{attrs:{label:"任务环境","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.ciJob.envType,callback:function(e){t.$set(t.ciJob,"envType","string"===typeof e?e.trim():e)},expression:"ciJob.envType"}},t._l(t.envTypeOptions,(function(t){return a("el-option",{key:t.envType,attrs:{label:t.envName,value:t.envType}})})),1)],1),a("el-form-item",{attrs:{label:"质量管理","label-width":t.labelWidth,required:""}},[a("el-checkbox",{model:{value:t.ciJob.enableSonar,callback:function(e){t.$set(t.ciJob,"enableSonar",e)},expression:"ciJob.enableSonar"}},[t._v("启用SonarQube")])],1),a("el-form-item",{attrs:{label:"隐藏任务","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.ciJob.hide,callback:function(e){t.$set(t.ciJob,"hide","string"===typeof e?e.trim():e)},expression:"ciJob.hide"}},t._l(t.hideOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.ciJob.comment,callback:function(e){t.$set(t.ciJob,"comment","string"===typeof e?e.trim():e)},expression:"ciJob.comment"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"存储配置",name:"storage"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"对象存储(oss)","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","remote-method":t.getOSSBucket,loading:t.bucketLoading},model:{value:t.ciJob.ossBucketId,callback:function(e){t.$set(t.ciJob,"ossBucketId","string"===typeof e?e.trim():e)},expression:"ciJob.ossBucketId"}},t._l(t.bucketOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"通知配置",name:"dingtalk"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"钉钉","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","remote-method":t.getDingtalk},model:{value:t.ciJob.dingtalkId,callback:function(e){t.$set(t.ciJob,"dingtalkId","string"===typeof e?e.trim():e)},expression:"ciJob.dingtalkId"}},t._l(t.dingtalkOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"通知类型","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.ciJob.atAll,callback:function(e){t.$set(t.ciJob,"atAll","string"===typeof e?e.trim():e)},expression:"ciJob.atAll"}},t._l(t.atAllOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"模版配置",name:"template"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"克隆模版","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择当前应用下的任务",remote:"","value-key":"id","remote-method":t.getCiJob},model:{value:t.cloneCiJob,callback:function(e){t.cloneCiJob="string"===typeof e?e.trim():e},expression:"cloneCiJob"}},t._l(t.ciJobOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"克隆选中任务模版",placement:"top"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.cloneCiJob},on:{click:t.handlerCloneJobTpl}},[a("i",{staticClass:"fa fa-clone",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-form-item",{attrs:{label:"任务模版","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择模版",remote:"","value-key":"id","remote-method":t.getJobTpl},on:{change:t.handlerSelTpl},model:{value:t.ciJob.jobTpl,callback:function(e){t.$set(t.ciJob,"jobTpl",e)},expression:"ciJob.jobTpl"}},t._l(t.jobTplOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑模版参数",placement:"top"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.handlerEditParameters}},[a("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])],1)],1),t.editing?t._e():a("el-form-item",{attrs:{label:"参数详情","label-width":t.labelWidth}},[a("parameters-view",{attrs:{parameters:t.ciJob.parameters}})],1),t.editing?a("el-form-item",{attrs:{label:"模版参数","label-width":t.labelWidth,required:""}},["{}"!=JSON.stringify(t.ciJob)?a("editor",{attrs:{lang:"yaml",theme:"chrome",width:"100%",height:"400"},on:{init:t.editorInit},model:{value:t.ciJob.parameterYaml,callback:function(e){t.$set(t.ciJob,"parameterYaml",e)},expression:"ciJob.parameterYaml"}}):t._e()],1):t._e()],1)],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},R=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{attrs:{shadow:"hover"}},t._l(t.parameters,(function(e,i){return a("div",{key:i},[a("div",[a("el-tag",[t._v(t._s(i))])],1),a("span",{staticStyle:{"margin-top":"2px","margin-bottom":"5px"}},[t._v(t._s(e))]),a("el-divider")],1)})),0)],1)},M=[],L={name:"ParamView",data:function(){return{}},props:["parameters"],methods:{}},U=L,W=function(t){t.options.__source="src/components/opscloud/application/param/ParametersView.vue"},F=W,G=Object(h["a"])(U,A,M,!1,null,"5358f9a9",null);"function"===typeof F&&F(G);var H=G.exports,V=a("c496"),X=a("3b66"),K=a("4903"),Y=a("df79"),Q=a("9bd2"),Z="/application/ci/job";function tt(t){return Object(Q["a"])({url:Z+"/page/query",method:"post",data:t})}function et(t){return Object(Q["a"])({url:Z+"/add",method:"post",data:t})}function at(t){return Object(Q["a"])({url:Z+"/update",method:"put",data:t})}function it(t){return Object(Q["a"])({url:Z+"/engine/create?ciJobId="+t,method:"put"})}function nt(t){return Object(Q["a"])({url:Z+"/engine/query?ciJobId="+t,method:"get"})}var ot=[{value:!1,label:"否"},{value:!0,label:"是"}],rt=[{value:!1,label:"自己"},{value:!0,label:"所有人"}],lt=[{value:!1,label:"否"},{value:!0,label:"是"}],st=[{value:"HTML5",label:"HTML5"},{value:"IOS",label:"iOS"},{value:"ANDROID",label:"Android"},{value:"JAVA",label:"Java"},{value:"PYTHON",label:"Python"}],ct={data:function(){return{activeName:"job",application:{},ciJob:{},jobTpl:{},labelWidth:"150px",options:{stripe:!0},queryParam:{instanceId:"",queryName:""},jobTypeOptions:st,envTypeOptions:[],enableTagOptions:ot,atAllOptions:rt,hideOptions:lt,branchesLoading:!1,branchOptions:[],dingtalkOptions:[],jobTplLoading:!1,jobTplOptions:[],bucketOptions:[],bucketLoading:!1,ciJobOptions:[],cloneCiJob:"",editing:!1}},name:"CiJobDialog",props:["formStatus"],components:{editor:a("7c9e"),ParametersView:H},mounted:function(){this.getEnvType()},beforeDestroy:function(){},methods:{editorInit:function(){a("2099"),a("2968"),a("0696"),a("95b8"),a("ec5e"),a("058d")},closeDialog:function(){this.ciJob={},this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t,e){this.branchOptions=[],this.dingtalkOptions=[],this.jobTplOptions=[],this.bucketOptions=[],this.activeName="job",this.application=t,this.ciJob=e,this.formStatus.operationType?this.editing=!0:(this.getBranches(),this.editing=!1),null===this.ciJob.dingtalk?this.getDingtalk(""):this.dingtalkOptions.push(this.ciJob.dingtalk),null===this.ciJob.jobTpl?(this.getJobTpl(""),this.getCiJob("")):this.jobTplOptions.push(this.ciJob.jobTpl),null===this.ciJob.bucket?this.getOSSBucket(""):this.bucketOptions.push(this.ciJob.bucket)},getCiJob:function(t){var e=this,a={queryName:t,applicationId:this.application.id,extend:1,page:1,length:10};tt(a).then((function(t){e.ciJobOptions=t.body.data}))},handlerEditParameters:function(){this.editing=!this.editing},handlerCloneJobTpl:function(){this.jobTplOptions=[],this.jobTplOptions.push(this.cloneCiJob.jobTpl),this.ciJob.jobTpl=this.cloneCiJob.jobTpl,this.ciJob.parameterYaml=this.cloneCiJob.parameterYaml},handlerSelTpl:function(){""===this.ciJob.parameterYaml&&(this.ciJob.parameterYaml=this.ciJob.jobTpl.parameterYaml)},getOSSBucket:function(t){var e=this;this.bucketLoading=!0;var a={queryName:t,isActive:!0,extend:1,page:1,length:10};Object(Y["b"])(a).then((function(t){e.bucketOptions=t.body.data,e.bucketLoading=!1}))},getDingtalk:function(t){var e=this,a={queryName:t,extend:1,page:1,length:10};Object(X["c"])(a).then((function(t){e.dingtalkOptions=t.body.data}))},getJobTpl:function(t){var e=this;this.jobTplLoading=!0;var a={queryName:t,extend:1,page:1,length:10};Object(K["f"])(a).then((function(t){e.jobTplOptions=t.body.data,e.jobTplLoading=!1}))},handlerSelScm:function(){""!==this.ciJob.scmMemberId&&this.getBranches()},handlerCreateBranch:function(){""!==this.ciJob.scmMemberId&&this.createBranches()},createBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId};Object(d["e"])(e).then((function(e){t.getBranches()}))},getBranches:function(){var t=this;this.branchesLoading=!0;var e={ciJobId:this.ciJob.id,scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getEnvType:function(){var t=this;Object(V["c"])("","",1,20).then((function(e){t.envTypeOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.ciJob);t.formStatus.operationType?et(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()})):at(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()}))}),600)}}},ut=ct,dt=function(t){t.options.__source="src/components/opscloud/application/CiJobDialog.vue"},pt=dt,mt=Object(h["a"])(ut,q,R,!1,null,null,null);"function"===typeof pt&&pt(mt);var bt=mt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务配置",name:"job"}},[a("el-form",{attrs:{model:t.application}},[a("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),a("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}})],1)],1),a("el-divider"),a("el-form",{attrs:{model:t.cdJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),a("el-form-item",{attrs:{label:"任务key","label-width":t.labelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入内容(只允许使用a-zA-Z、0-9、-)",disabled:!t.formStatus.operationType},model:{value:t.cdJob.jobKey,callback:function(e){t.$set(t.cdJob,"jobKey",e)},expression:"cdJob.jobKey"}})],1),a("el-form-item",{attrs:{label:"任务类型","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.cdJob.jobType,callback:function(e){t.$set(t.cdJob,"jobType","string"===typeof e?e.trim():e)},expression:"cdJob.jobType"}},t._l(t.jobTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._e(),a("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.cdJob.comment,callback:function(e){t.$set(t.cdJob,"comment","string"===typeof e?e.trim():e)},expression:"cdJob.comment"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"模版配置",name:"template"}},[a("el-form",{attrs:{model:t.cdJob}},[a("el-form-item",{attrs:{label:"任务模版","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","value-key":"id","remote-method":t.getJobTpl},on:{change:t.handlerSelTpl},model:{value:t.cdJob.jobTpl,callback:function(e){t.$set(t.cdJob,"jobTpl",e)},expression:"cdJob.jobTpl"}},t._l(t.jobTplOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑模版参数",placement:"top"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.handlerEditParameters}},[a("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])],1)],1),t.editing?t._e():a("el-form-item",{attrs:{label:"参数详情","label-width":t.labelWidth}},[a("parameters-view",{attrs:{parameters:t.cdJob.parameters}})],1),t.editing?a("el-form-item",{attrs:{label:"模版参数","label-width":t.labelWidth,required:""}},["{}"!=JSON.stringify(t.cdJob)?a("editor",{attrs:{lang:"yaml",theme:"chrome",width:"100%",height:"400"},on:{init:t.editorInit},model:{value:t.cdJob.parameterYaml,callback:function(e){t.$set(t.cdJob,"parameterYaml",e)},expression:"cdJob.parameterYaml"}}):t._e()],1):t._e()],1)],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},ht=[],gt="/application/cd/job";function vt(t){return Object(Q["a"])({url:gt+"/page/query",method:"post",data:t})}function yt(t){return Object(Q["a"])({url:gt+"/add",method:"post",data:t})}function wt(t){return Object(Q["a"])({url:gt+"/update",method:"put",data:t})}function xt(t){return Object(Q["a"])({url:gt+"/engine/create?cdJobId="+t,method:"put"})}function _t(t){return Object(Q["a"])({url:gt+"/engine/query?cdJobId="+t,method:"get"})}var St=[{value:"ANDROID_REINFORCE",label:"AndroidReinforce"},{value:"JAVA_DEPLOYMENT",label:"JavaDeployment"}],kt={data:function(){return{activeName:"job",application:{},cdJob:{},jobTpl:{},labelWidth:"150px",options:{stripe:!0},queryParam:{instanceId:"",queryName:""},jobTypeOptions:St,envTypeOptions:[],jobTplLoading:!1,jobTplOptions:[],editing:!1}},name:"CdJobDialog",props:["formStatus"],components:{editor:a("7c9e"),ParametersView:H},mounted:function(){this.getEnvType()},beforeDestroy:function(){},methods:{editorInit:function(){a("2099"),a("2968"),a("0696"),a("95b8"),a("ec5e"),a("058d")},closeDialog:function(){this.cdJob={},this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t,e){this.cdJob={},this.jobTplOptions=[],this.activeName="job",this.application=t,this.cdJob=e,null===this.cdJob.jobTpl?this.getJobTpl(""):this.jobTplOptions.push(this.cdJob.jobTpl),this.formStatus.operationType?this.editing=!0:this.editing=!1},getJobTpl:function(t){var e=this;this.jobTplLoading=!0;var a={queryName:t,extend:1,page:1,length:10};Object(K["f"])(a).then((function(t){e.jobTplOptions=t.body.data,e.jobTplLoading=!1}))},handlerEditParameters:function(){this.editing=!this.editing},handlerSelTpl:function(){""===this.cdJob.parameterYaml&&(this.cdJob.parameterYaml=this.cdJob.jobTpl.parameterYaml)},getEnvType:function(){var t=this;Object(V["c"])("","",1,20).then((function(e){t.envTypeOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.cdJob);t.formStatus.operationType?yt(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()})):wt(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()}))}),600)}}},Ot=kt,Dt=function(t){t.options.__source="src/components/opscloud/application/CdJobDialog.vue"},Jt=Dt,jt=Object(h["a"])(Ot,ft,ht,!1,null,null,null);"function"===typeof Jt&&Jt(jt);var Tt=jt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("构建引擎")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.creatingBuildEngine},on:{click:t.handlerBuildEngineCreate}},[t._v("创建工作引擎 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"5px"},attrs:{type:"text",loading:t.correctingBuildEngine},on:{click:t.handlerBuildEngineCorrection}},[t._v("校正工作引擎 ")])],1),a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.buildEngineLoading,expression:"buildEngineLoading"}],attrs:{data:t.buildEngines}},[a("el-table-column",{attrs:{prop:"jenkinsInstance",label:"工作引擎实例名称",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.jenkinsInstance.name))])]}}])}),a("el-table-column",{attrs:{prop:"lastBuildNumber",label:"最后构建",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.lastBuildUrl,target:"_blank"}},[a("el-tag",[t._v(t._s(e.row.lastBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.jobUrl,target:"_blank"}},[a("el-tag",[t._v(t._s(e.row.name))])],1)]}}])}),t._e()],1)],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:null!==t.job.cdJobId,expression:"job.cdJobId !== null"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("部署引擎")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.creatingDeploymentEngine},on:{click:t.handlerDeploymentEngineCreate}},[t._v("创建工作引擎 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"5px"},attrs:{type:"text",loading:t.correctingDeploymentEngine},on:{click:t.handlerDeploymentEngineCorrection}},[t._v("校正工作引擎 ")])],1),a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.deploymentEngineLoading,expression:"deploymentEngineLoading"}],attrs:{data:t.deploymentEngines}},[a("el-table-column",{attrs:{prop:"jenkinsInstance",label:"工作引擎实例名称",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.jenkinsInstance.name))])]}}])}),a("el-table-column",{attrs:{prop:"lastBuildNumber",label:"最后构建",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.lastBuildUrl,target:"_blank"}},[a("el-tag",[t._v(t._s(e.row.lastBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.jobUrl,target:"_blank"}},[a("el-tag",[t._v(t._s(e.row.name))])],1)]}}])}),t._e()],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},It=[],Bt=a("0970"),Nt={data:function(){return{title:"工作引擎配置详情",job:"",labelWidth:"150px",options:{stripe:!0},buildEngines:[],buildEngineLoading:!1,creatingBuildEngine:!1,correctingBuildEngine:!1,deploymentEngines:[],deploymentEngineLoading:!1,creatingDeploymentEngine:!1,correctingDeploymentEngine:!1}},name:"JobEngineDialog",props:["formStatus"],components:{},mounted:function(){},methods:{closeDialog:function(){this.buildEngines=[],this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t){this.job={ciJobId:t.ciJobId,cdJobId:t.cdJobId},this.fetchBuildEngineData(),null!==this.job.cdJobId&&this.fetchDeploymentEngineData()},handlerBuildEngineCreate:function(){var t=this;this.creatingBuildEngine=!0,it(this.job.ciJobId).then((function(e){t.creatingBuildEngine=!1,t.fetchBuildEngineData()}))},handlerBuildEngineCorrection:function(){var t=this;this.correctingBuildEngine=!0,Object(Bt["d"])(this.job.ciJobId).then((function(e){t.correctingBuildEngine=!1,t.fetchBuildEngineData()}))},handlerDeploymentEngineCreate:function(){var t=this;this.creatingDeploymentEngine=!0,xt(this.job.cdJobId).then((function(e){t.creatingDeploymentEngine=!1,t.fetchDeploymentEngineData()}))},handlerDeploymentEngineCorrection:function(){var t=this;this.correctingDeploymentEngine=!0,Object(Bt["e"])(this.job.cdJobId).then((function(e){t.correctingDeploymentEngine=!1,t.fetchDeploymentEngineData()}))},handleClick:function(){this.$emit("input",!this.value)},fetchBuildEngineData:function(){var t=this;this.buildEngineLoading=!0,nt(this.job.ciJobId).then((function(e){t.buildEngines=e.body,t.buildEngineLoading=!1}))},fetchDeploymentEngineData:function(){var t=this;this.deploymentEngineLoading=!0,_t(this.job.cdJobId).then((function(e){t.deploymentEngines=e.body,t.deploymentEngineLoading=!1}))}}},Pt=Nt,Et=(a("adc0"),function(t){t.options.__source="src/components/opscloud/application/JobEngineDialog.vue"}),$t=Et,zt=Object(h["a"])(Pt,Ct,It,!1,null,null,null);"function"===typeof $t&&$t(zt);var qt=zt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog,width:"80%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("el-form",[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"xterm",attrs:{id:"outputXterm"}})])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")]),t._e()],1)],1)},At=[],Mt="XTERM",Lt={data:function(){return{title:"构建日志详情",buildType:"",buildId:"",output:"",xterm:"auditXterm",term:null,xtermSize:{rows:30},sessionInstance:"",labelWidth:"100px",xtermTheme:{foreground:"#FFFFFF",background:"#606266",cursor:"help"}}},name:"ViewJobBuildOutput",props:["formStatus"],components:{},mounted:function(){this.setXTermSetting()},beforeDestroy:function(){},methods:{setXTermSetting:function(){var t=this;Object(T["a"])(Mt).then((function(e){if(e.success)try{t.xtermTheme.foreground=e.body["XTERM_FOREGROUND"],t.xtermTheme.background=e.body["XTERM_BACKGROUND"]}catch(a){}else t.$message.error(e.msg)}))},closeDialog:function(){this.sessionInstance="",this.term.dispose(),this.term=null,this.formStatus.visible=!1},queryJobBuildOutput:function(){var t=this,e={buildType:this.buildType,buildId:this.buildId};Object(Bt["l"])(e).then((function(e){e.success&&(t.output=e.body,t.handlerOutput())}))},initData:function(t,e){this.buildType=t,this.buildId=e,this.queryJobBuildOutput()},handlerOutput:function(){null!==this.term&&this.term.dispose();var t=new J["Terminal"]({rendererType:"canvas",allowTransparency:!0,fontSize:11,rows:this.xtermSize.rows,theme:this.xtermTheme,termName:"xterm",visualBell:!1,popOnBell:!1,scrollback:5e3,screenKeys:!1,debug:!1,cancelEvents:!1,cursorStyle:"bar",cursorBlink:!1,convertEol:!0,disableStdin:!0}),e=new j["FitAddon"];t.loadAddon(e),t.open(document.getElementById("outputXterm")),t.write(this.output),e.fit(),t.focus(),this.term=t},handleClick:function(){this.$emit("input",!this.value)}}},Ut=Lt,Wt=function(t){t.options.__source="src/components/opscloud/application/ViewJobBuildOutput.vue"},Ft=Wt,Gt=Object(h["a"])(Ut,Rt,At,!1,null,null,null);"function"===typeof Ft&&Ft(Gt);var Ht=Gt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[a("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?a("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-branch",{attrs:{branch:t.row.branch}})]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-status",{attrs:{build:t.row}})]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),a("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),a("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,isRollback:t.row.isRollback,buildStatus:t.row.buildStatus}}),a("build-commit",{attrs:{commit:t.row.commitDetails}}),a("build-changes",{attrs:{changes:t.row.changes}}),a("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),a("build-executors",{attrs:{executors:t.row.executors}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("build-operation",{attrs:{build:e.row,job:t.ciJob}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Xt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-alert",{staticStyle:{"margin-bottom":"5px"},attrs:{title:"Commit",type:"success","show-icon":"",closable:!1}},[a("span",[t._v(t._s(t.commit.commitMessage))]),a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerOpenUrl(1)}}},[t._v("[点击查看详情] "+t._s(t.commit.commit)+" ")])],1),t._e()],1)},Yt=[],Qt={name:"ExecuteCommit",data:function(){return{}},props:["commit"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(){D["a"].open(this.commit.commitUrl)}}},Zt=Qt,te=(a("336f"),function(t){t.options.__source="src/components/opscloud/build/execute/ExecuteCommit.vue"}),ee=te,ae=Object(h["a"])(Zt,Kt,Yt,!1,null,"65f6f7cc",null);"function"===typeof ee&&ee(ae);var ie=ae.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerOpenUrl()}}},[t._v(t._s(""!==t.commit.commit?t.commit.commit:"缺省")+" ")])],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"commit",placement:"top-start"}},[a("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},oe=[],re={name:"BuildCommit",data:function(){return{}},props:["commit"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(){D["a"].open(this.commit.commitUrl)}}},le=re,se=(a("8a7d"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildCommit.vue"}),ce=se,ue=Object(h["a"])(le,ne,oe,!1,null,"2a0ec080",null);"function"===typeof ce&&ce(ue);var de=ue.exports,pe=a("ec44"),me=a("822b"),be=a("877f"),fe=a("5505"),he=a("1379"),ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:null!==t.isRollback&&t.isRollback,expression:"isRollback !== null && isRollback"}],staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",type:"danger"}},[t._v("回滚版本 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:""===t.versionDesc?"没有版本说明":t.versionDesc,placement:"top-start"}},[a("el-tag",{attrs:{effect:"dark",type:t._f("getBuildStatusType")(t.buildStatus)}},[t._v(t._s(t.versionName))])],1)],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"版本",placement:"top-start"}},[a("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},ve=[];function ye(t){switch(t){case"FAILURE":return"danger";case"SUCCESS":return"success";case"":return"info";default:return"info"}}var we={name:"BuildVersion",data:function(){return{}},props:["versionName","versionDesc","buildStatus","isRollback"],filters:{getBuildStatusType:ye},mounted:function(){},methods:{}},xe=we,_e=(a("61df"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildVersion.vue"}),Se=_e,ke=Object(h["a"])(xe,ge,ve,!1,null,"452ffca6",null);"function"===typeof Se&&Se(ke);var Oe=ke.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:null!==t.build.buildStatus?t.build.buildStatus:"Running",placement:"top-start"}},[a("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(t.build.buildStatus)}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!t.build.finalized,expression:"!build.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(t.build.buildStatus))+" ")])],1)],1)},Je=[],je=a("ab7b"),Te={name:"BuildStatus",props:["build"],filters:{getJobBuildStatusType:je["b"],getJobBuildStatusText:je["a"]}},Ce=Te,Ie=function(t){t.options.__source="src/components/opscloud/build/summary/BuildStatus.vue"},Be=Ie,Ne=Object(h["a"])(Ce,De,Je,!1,null,"23f2011d",null);"function"===typeof Be&&Be(Ne);var Pe=Ne.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button-group",{staticStyle:{float:"right"}},[t.build.supportRollback&&t.build.finalized&&"SUCCESS"===t.build.buildStatus?a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"回滚当前任务版本",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"fa fa-undo",loading:t.rollbacking},on:{click:function(e){return t.handlerRollback()}}})],1):t._e(),t.build.finalized?t._e():a("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(e){return t.handlerAbortBuild()}}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"打开构建任务详情",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.handlerOpenBuildUrl()}}})],1),null!=t.option&&t.option.showBuildDetails?a("el-button",{attrs:{type:"primary",icon:"fa fa-download"},on:{click:function(e){return t.handlerOpenBuildDetails()}}}):t._e()],1)],1)},$e=[],ze={name:"BuildOperation",data:function(){return{ciJob:{},rollbacking:!1}},props:["build","job","option"],filters:{},mounted:function(){},methods:{handlerRollback:function(){var t=this;this.$confirm("确定回滚当前版本?").then((function(e){t.rollbacking=!0;var a={rollbackJobBuildId:t.build.id},i={ciJobId:t.job.id,branch:"",versionName:"",versionDesc:"",isSilence:!1,isRollback:!0,paramMap:a};Object(Bt["c"])(i).then((function(e){e.success?t.$message({type:"success",message:"回滚任务执行中!"}):t.$message.error(e.msg),t.rollbacking=!1})),done()})).catch((function(t){}))},handlerAbortBuild:function(){var t=this;Object(Bt["a"])(this.build.id).then((function(e){e.success?t.$message({message:"执行成功（请等待）!",type:"success"}):t.$message.error(e.msg)}))},handlerOpenBuildUrl:function(){D["a"].open(this.build.jobBuildUrl)},handlerOpenBuildDetails:function(){var t=window.location.host,e=window.location.href.split("://")[0];switch(this.option.buildType){case"ANDROID_BUILD":D["a"].open(e+"://"+t+"/#/job/build/android?buildId="+this.build.id);break;case"IOS_BUILD":D["a"].open(e+"://"+t+"/#/job/build/ios?buildId="+this.build.id);break;default:}}}},qe=ze,Re=function(t){t.options.__source="src/components/opscloud/build/operation/BuildOperation.vue"},Ae=Re,Me=Object(h["a"])(qe,Ee,$e,!1,null,"f4c9561e",null);"function"===typeof Ae&&Ae(Me);var Le=Me.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),a("b",[t._v(t._s(t.branch))])])},We=[],Fe={name:"BuildBranch",props:["branch"]},Ge=Fe,He=function(t){t.options.__source="src/components/opscloud/build/summary/BuildBranch.vue"},Ve=He,Xe=Object(h["a"])(Ge,Ue,We,!1,null,"65013770",null);"function"===typeof Ve&&Ve(Xe);var Ke=Xe.exports,Ye={data:function(){return{title:"HTML5构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operation:{showOpen:!0},timer:null}},name:"JobH5BuildDialog",props:["formStatus"],components:{ExecuteCommit:ie,BuildCommit:de,BuildUser:pe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:fe["a"],BuildChanges:he["a"],BuildVerison:Oe,BuildOperation:Le,BuildStatus:Pe,BuildBranch:Ke},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:"",versionDesc:"",paramMap:{}};Object(Bt["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Qe=Ye,Ze=(a("e6e5"),function(t){t.options.__source="src/components/opscloud/build/H5JobBuildDialog.vue"}),ta=Ze,ea=Object(h["a"])(Qe,Vt,Xt,!1,null,null,null);"function"===typeof ta&&ta(ea);var aa=ea.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[a("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?a("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.ciJob.enableSonar,expression:"ciJob.enableSonar"}],attrs:{label:"质量管理","label-width":t.labelWidth}},[a("el-checkbox",{model:{value:t.buildParam.isSonar,callback:function(e){t.$set(t.buildParam,"isSonar",e)},expression:"buildParam.isSonar"}},[t._v("本次构建启用Sonar扫描")])],1),a("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),a("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[a("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1),a("el-form-item",{attrs:{label:"通知静默","label-width":t.labelWidth}},[a("el-checkbox",{model:{value:t.buildParam.isSilence,callback:function(e){t.$set(t.buildParam,"isSilence",e)},expression:"buildParam.isSilence"}},[t._v("本次构建不发送钉钉通知")])],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-branch",{attrs:{branch:t.row.branch}})]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-status",{attrs:{build:t.row}})]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),a("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),a("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,isRollback:t.row.isRollback,buildStatus:t.row.buildStatus}}),a("build-commit",{attrs:{commit:t.row.commitDetails}}),a("build-changes",{attrs:{changes:t.row.changes}}),a("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),a("build-executors",{attrs:{executors:t.row.executors}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("build-operation",{attrs:{build:e.row,job:t.ciJob}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},na=[],oa={data:function(){return{title:"Java构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",isSilence:!1,isSonar:null,paramMap:{}},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",timer:null}},name:"JobJavaBuildDialog",props:["formStatus"],components:{ExecuteCommit:ie,BuildCommit:de,BuildUser:pe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:fe["a"],BuildChanges:he["a"],BuildVerison:Oe,BuildOperation:Le,BuildStatus:Pe,BuildBranch:Ke},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.getBranches(),this.setTimer(),this.fetchData(),null!==e.parameters.isSonar&&("true"===e.parameters.isSonar?this.buildParam.isSonar=!0:this.buildParam.isSonar=!1)},getBranches:function(){var t=this;this.branchesLoading=!0;var e={ciJobId:this.ciJob.id,scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,isSilence:this.buildParam.isSilence,paramMap:{}};Object(Bt["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},ra=oa,la=(a("a92b"),function(t){t.options.__source="src/components/opscloud/build/JavaJobBuildDialog.vue"}),sa=la,ca=Object(h["a"])(ra,ia,na,!1,null,null,null);"function"===typeof sa&&sa(ca);var ua=ca.exports,da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行部署",name:"deploy"}},[a("el-form",{attrs:{model:t.cdJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),a("el-form-item",{attrs:{label:"选择构件","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{placeholder:"选择类型",loading:t.loadArtifacts},model:{value:t.buildId,callback:function(e){t.buildId="string"===typeof e?e.trim():e},expression:"buildId"}},t._l(t.artifactOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.versionName,value:e.id,disabled:e.noArtifact}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.versionName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v("#"+t._s(e.jobBuildNumber)+" "+t._s(e.endTime)+"("+t._s(e.ago)+")")])])})),1)],1),a("el-form-item",{attrs:{label:"主机分组","label-width":t.labelWidth,required:""}},[a("el-select",{attrs:{placeholder:"选择类型"},on:{change:t.handlerSelHostPattern},model:{value:t.hostPattern,callback:function(e){t.hostPattern="string"===typeof e?e.trim():e},expression:"hostPattern"}},t._l(t.hostPatternOptions,(function(t){return a("el-option",{key:t.hostPattern,attrs:{label:t.hostPattern,value:t.hostPattern}})})),1)],1),a("el-form-item",{attrs:{label:"主机详情","label-width":t.labelWidth}},[a("el-card",{attrs:{shadow:"never"}},t._l(t.servers,(function(e){return a("div",{key:e.id},[a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.name)+"-"+t._s(e.serialNumber)+" - "+t._s(e.privateIp)+" ")]),a("el-tag",{staticStyle:{"margin-left":"2px"},attrs:{type:"success",effect:"dark"}},[t._v(t._s(null===e.deployVersion?"首次发布":e.deployVersion.versionName)+" ")])],1)})),0)],1),a("el-form-item",{attrs:{label:"并发控制","label-width":t.labelWidth}},[a("el-slider",{staticStyle:{"margin-left":"10px",width:"50%"},attrs:{mini:"",min:1,max:8,step:1,"show-stops":""},model:{value:t.concurrent,callback:function(e){t.concurrent=e},expression:"concurrent"}})],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),t._e(),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-status",{attrs:{build:t.row}})]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),a("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),a("build-host-pattern",{attrs:{hostPattern:t.row.hostPattern}}),a("build-servers",{attrs:{servers:t.row.servers}}),a("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),a("build-executors",{attrs:{executors:t.row.executors}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-operation",{attrs:{build:t.row}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},pa=[],ma=(a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.hostPattern,expression:"hostPattern !== null"}]},[a("b",{staticClass:"label"},[t._v(t._s(t.hostPattern))])]),a("span",{directives:[{name:"show",rawName:"v-show",value:null===t.hostPattern,expression:"hostPattern === null"}]},[t._v("No HostPattern")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"主机分组",placement:"top-start"}},[a("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)}),ba=[],fa={name:"BuildHostPattern",data:function(){return{}},props:["hostPattern"],filters:{},mounted:function(){},methods:{}},ha=fa,ga=(a("0dc4"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildHostPattern.vue"}),va=ga,ya=Object(h["a"])(ha,ma,ba,!1,null,"7e7cc102",null);"function"===typeof va&&va(ya);var wa=ya.exports,xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.servers.length>0,expression:"servers.length > 0"}]},t._l(t.servers,(function(e){return a("div",{key:e.id},[a("b",{staticClass:"label"},[t._v(t._s(e.serverName)+"-"+t._s(e.serialNumber))]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.privateIp))])])})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.servers.length,expression:"servers.length === 0"}]},[t._v("No Servers")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"部署服务器",placement:"top-start"}},[a("i",{staticClass:"fa fa-server",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},_a=[],Sa={name:"BuildServers",data:function(){return{}},props:["servers"],filters:{},mounted:function(){},methods:{}},ka=Sa,Oa=(a("395e"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildServers.vue"}),Da=Oa,Ja=Object(h["a"])(ka,xa,_a,!1,null,"d70269ec",null);"function"===typeof Da&&Da(Ja);var ja=Ja.exports,Ta={data:function(){return{title:"Java发布任务",activeName:"deploy",application:"",cdJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},loadArtifacts:!1,artifactOptions:[],buildId:"",concurrent:1,hostPattern:"",hostPatternOptions:[],servers:[],tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"JavaJobDeployDialog",props:["formStatus"],components:{BuildUser:pe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:fe["a"],BuildChanges:he["a"],BuildHostPattern:wa,BuildServers:ja,BuildOperation:Le,BuildStatus:Pe,BuildBranch:Ke},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},getBuildArtifact:function(){var t=this;this.loadArtifacts=!0;var e={ciJobId:this.cdJob.ciJobId,size:10};Object(Bt["i"])(e).then((function(e){t.artifactOptions=e.body,null!==t.artifactOptions&&t.artifactOptions.length>0&&(t.buildId=t.artifactOptions[0].id),t.loadArtifacts=!1}))},getHostPattern:function(){var t=this;Object(Bt["h"])(this.cdJob.id).then((function(e){e.success&&(t.hostPatternOptions=e.body,t.handlerSelHostPattern())}))},initData:function(t,e){this.activeName="deploy",this.buildId="",this.application=t,this.cdJob=e,this.hostPatternOptions=[],this.servers=[],this.server="",this.hostPattern="",null!==e.parameters.hostPattern&&(this.hostPattern=e.parameters.hostPattern),this.setTimer(),this.fetchData(),this.getBuildArtifact(),this.getHostPattern()},handlerSelHostPattern:function(){this.servers=[];var t=!0,e=!1,a=void 0;try{for(var i,n=this.hostPatternOptions[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(o.hostPattern===this.hostPattern){this.servers=o.servers;break}}}catch(r){e=!0,a=r}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}},handlerBuild:function(){var t=this;""===this.buildId&&this.$message({message:"未选中部署构建",type:"warning"}),""===this.hostPattern&&this.$message({message:"未选中主机分组",type:"warning"}),this.building=!0,this.buildParam.paramMap.hostPattern=this.hostPattern,this.buildParam.paramMap.concurrent=this.concurrent;var e={cdJobId:this.cdJob.id,ciBuildId:this.buildId,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,concurrent:this.buildParam.concurrent,paramMap:this.buildParam.paramMap};Object(Bt["b"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={cdJobId:this.cdJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["g"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Ca=Ta,Ia=(a("8474"),function(t){t.options.__source="src/components/opscloud/build/JavaJobDeployDialog.vue"}),Ba=Ia,Na=Object(h["a"])(Ca,da,pa,!1,null,null,null);"function"===typeof Ba&&Ba(Na);var Pa=Na.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[a("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?a("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),a("el-form-item",{attrs:{label:"构建类型","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.buildParam.paramMap.buildType,callback:function(e){t.$set(t.buildParam.paramMap,"buildType",e)},expression:"buildParam.paramMap.buildType"}},t._l(t.buildTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),a("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[a("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-branch",{attrs:{branch:t.row.branch}})]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-status",{attrs:{build:t.row}})]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),a("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),a("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,buildStatus:t.row.buildStatus}}),a("build-commit",{attrs:{commit:t.row.commitDetails}}),a("build-changes",{attrs:{changes:t.row.changes}}),a("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),a("build-executors",{attrs:{executors:t.row.executors}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("build-operation",{attrs:{build:e.row,option:t.operationOption}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},$a=[],za=[{value:"alpha",label:"alpha"},{value:"release",label:"release"}],qa={data:function(){return{title:"iOS构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},buildTypeOptions:za,branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operationOption:{buildType:"IOS_BUILD",showBuildDetails:!0},timer:null}},name:"IOSJobBuildDialog",props:["formStatus"],components:{ExecuteCommit:ie,BuildCommit:de,BuildUser:pe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:fe["a"],BuildChanges:he["a"],BuildVerison:Oe,BuildStatus:Pe,BuildBranch:Ke,BuildOperation:Le},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.buildParam.paramMap.buildType=this.ciJob.parameters.buildType,this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:this.buildParam.paramMap};Object(Bt["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Ra=qa,Aa=(a("bb63"),function(t){t.options.__source="src/components/opscloud/build/IOSJobBuildDialog.vue"}),Ma=Aa,La=Object(h["a"])(Ra,Ea,$a,!1,null,null,null);"function"===typeof Ma&&Ma(La);var Ua=La.exports,Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])],1),a("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),a("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[a("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),a("b",[t._v(t._s(e.row.branch))])]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.buildStatus,placement:"top-start"}},[a("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(e.row.buildStatus)}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.row.finalized,expression:"!scope.row.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(e.row.buildStatus))+" ")])],1)]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.user.email,placement:"top-start"}},[a("el-tag",{attrs:{"disable-transitions":"",type:"primary"}},[t._v(t._s(e.row.user.displayName)+" ")])],1),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.row.ago))])],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[a("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",[t._v("构建时长: "+t._s(e.row.buildTime))]),a("div",[t._v("开始时间: "+t._s(e.row.startTime))]),a("div",[t._v("结束时间: "+t._s(e.row.endTime))])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[a("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.changes.length>0,expression:"scope.row.changes.length > 0"}],staticClass:"tag-group"},t._l(e.row.changes,(function(e){return a("div",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.commitId,placement:"top-start"}},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.shortCommitId))])],1),a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.commitMsg))])],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.changes.length,expression:"scope.row.changes.length === 0"}]},[t._v("No Changes")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"变更详情",placement:"top-start"}},[a("i",{staticClass:"fa fa-comment-o",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.artifacts.length>0,expression:"scope.row.artifacts.length > 0"}],staticClass:"tag-group"},t._l(e.row.artifacts,(function(e){return a("div",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.artifactFileName))])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.artifactFileSize))])],1)],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.artifacts.length,expression:"scope.row.artifacts.length === 0"}]},[t._v("No Artifacts")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[a("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.executors.length>0,expression:"scope.row.executors.length > 0"}],staticClass:"tag-group"},t._l(e.row.executors,(function(e){return a("div",{key:e.id},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp))])],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.executors.length,expression:"scope.row.executors.length === 0"}]},[t._v("No Executors")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[a("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",{staticStyle:{float:"right",padding:"3px 0"}},[e.row.finalized?t._e():a("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(a){return t.handlerRowAbortBuild(e.row)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(a){return t.handlerRowOpenBuildUrl(e.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Fa=[],Ga={data:function(){return{title:"Python构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"PythonJobBuildDialog",props:["formStatus"],components:{},filters:{getJobBuildStatusType:je["b"],getJobBuildStatusText:je["a"]},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},handlerRowAbortBuild:function(t){var e=this;Object(Bt["a"])(t.id).then((function(t){t.success?e.$message({message:"执行成功（请等待）!",type:"success"}):e.$message.error(t.msg)}))},handlerRowOpenBuildUrl:function(t){D["a"].open(t.jobBuildUrl)},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:{}};Object(Bt["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Ha=Ga,Va=(a("2d7f"),function(t){t.options.__source="src/components/opscloud/build/PythonJobBuildDialog.vue"}),Xa=Va,Ka=Object(h["a"])(Ha,Wa,Fa,!1,null,null,null);"function"===typeof Xa&&Xa(Ka);var Ya=Ka.exports,Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[a("el-form",{attrs:{model:t.ciJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),a("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[a("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch",e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[a("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?a("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),a("el-form-item",{attrs:{label:"构建类型","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.BUILD_TYPE,callback:function(e){t.BUILD_TYPE=e},expression:"BUILD_TYPE"}},t._l(t.buildTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"发布类型","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.PRODUCT_FLAVOR,callback:function(e){t.PRODUCT_FLAVOR=e},expression:"PRODUCT_FLAVOR"}},t._l(t.buildProductFlavorOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),a("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[a("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-branch",{attrs:{branch:t.row.branch}})]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-status",{attrs:{build:t.row}})]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),a("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),a("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,buildStatus:t.row.buildStatus}}),a("build-commit",{attrs:{commit:t.row.commitDetails}}),a("build-changes",{attrs:{changes:t.row.changes}}),a("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),a("build-executors",{attrs:{executors:t.row.executors}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("build-operation",{attrs:{build:e.row,option:t.operationOption}})]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Za=[],ti=[{value:"release",label:"release"},{value:"debug",label:"debug"}],ei=[{value:"alpha",label:"alpha"},{value:"publish",label:"publish"}],ai={data:function(){return{title:"Android构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},BUILD_TYPE:"",PRODUCT_FLAVOR:"",buildParam:{versionName:"",versionDesc:""},buildTypeOptions:ti,buildProductFlavorOptions:ei,branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operationOption:{buildType:"ANDROID_BUILD",showBuildDetails:!0},timer:null}},name:"AndroidJobBuildDialog",props:["formStatus"],components:{ExecuteCommit:ie,BuildCommit:de,BuildUser:pe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:fe["a"],BuildChanges:he["a"],BuildVerison:Oe,BuildOperation:Le,BuildStatus:Pe,BuildBranch:Ke},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.BUILD_TYPE=e.parameters["BUILD_TYPE"],this.PRODUCT_FLAVOR=e.parameters["PRODUCT_FLAVOR"],this.commit="",this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:{BUILD_TYPE:this.BUILD_TYPE,PRODUCT_FLAVOR:this.PRODUCT_FLAVOR}};Object(Bt["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},ii=ai,ni=(a("1c71"),function(t){t.options.__source="src/components/opscloud/build/AndroidJobBuildDialog.vue"}),oi=ni,ri=Object(h["a"])(ii,Qa,Za,!1,null,null,null);"function"===typeof oi&&oi(ri);var li=ri.exports,si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"执行加固",name:"reinforce"}},[a("el-form",{attrs:{model:t.cdJob}},[a("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[a("el-input",{attrs:{disabled:""},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),a("el-form-item",{attrs:{label:"选择构件","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型",loading:t.loadBuildArtifact},model:{value:t.buildId,callback:function(e){t.buildId="string"===typeof e?e.trim():e},expression:"buildId"}},t._l(t.buildArtifactOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.versionName,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.versionName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v("#"+t._s(e.jobBuildNumber)+" "+t._s(e.endTime)+"("+t._s(e.ago)+")")])])})),1)],1),a("el-form-item",{attrs:{label:"构建渠道","label-width":t.labelWidth}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.channelType,callback:function(e){t.channelType="string"===typeof e?e.trim():e},expression:"channelType"}},t._l(t.channelTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!==t.channelType,expression:"channelType !== 0"}],attrs:{label:"选择渠道","label-width":t.labelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择类型",multiple:""},model:{value:t.channelGroup,callback:function(e){t.channelGroup=e},expression:"channelGroup"}},t._l(t.channelGroupOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),a("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[a("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),a("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),a("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),a("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),a("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),a("b",[t._v(t._s(e.row.branch))])]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.buildStatus,placement:"top-start"}},[a("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(e.row.buildStatus)}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.row.finalized,expression:"!scope.row.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(e.row.buildStatus))+" ")])],1)]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.user.email,placement:"top-start"}},[a("el-tag",{attrs:{"disable-transitions":"",type:"primary"}},[t._v(t._s(e.row.user.displayName)+" ")])],1),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.row.ago))])],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[a("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",[t._v("构建时长: "+t._s(e.row.buildTime))]),a("div",[t._v("开始时间: "+t._s(e.row.startTime))]),a("div",[t._v("结束时间: "+t._s(e.row.endTime))])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[a("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.artifacts.length>0,expression:"scope.row.artifacts.length > 0"}],staticClass:"tag-group"},t._l(e.row.artifacts,(function(e){return a("div",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.artifactFileName))])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.artifactFileSize))])],1)],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.artifacts.length,expression:"scope.row.artifacts.length === 0"}]},[t._v("No Artifacts")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[a("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.row.executors.length>0,expression:"scope.row.executors.length > 0"}],staticClass:"tag-group"},t._l(e.row.executors,(function(e){return a("div",{key:e.id},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp))])],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.executors.length,expression:"scope.row.executors.length === 0"}]},[t._v("No Executors")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[a("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",{staticStyle:{float:"right",padding:"3px 0"}},[e.row.finalized?t._e():a("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(a){return t.handlerSelRow(e.row)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(a){return t.handlerRowOpenBuildUrl(e.row)}}}),a("el-button",{attrs:{type:"primary",icon:"fa fa-download"},on:{click:function(a){return t.handlerRowOpenBuildDetails(e.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},ci=[],ui=[{value:0,label:"全渠道"},{value:1,label:"选择渠道"}],di=[{value:"shero",label:"官网"},{value:"yyb",label:"应用宝"},{value:"huawei",label:"华为"},{value:"xiaomi",label:"小米"},{value:"oppo",label:"OPPO"},{value:"vivo",label:"VIVO"},{value:"bmhy",label:"斑马会员"}],pi={data:function(){return{title:"Android加固任务",activeName:"reinforce",application:"",cdJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},loadBuildArtifact:!1,buildArtifactOptions:[],buildId:"",channelType:"",channelGroup:[],channelTypeOptions:ui,channelGroupOptions:di,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"AndroidReinforceJobBuildDialog",props:["formStatus"],components:{},filters:{getJobBuildStatusType:je["b"],getJobBuildStatusText:je["a"]},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},getBuildArtifact:function(){var t=this;this.loadBuildArtifact=!0;var e={ciJobId:this.cdJob.ciJobId,size:10};Object(Bt["i"])(e).then((function(e){t.buildArtifactOptions=e.body,null!==e.body&&e.body.length>0&&(t.buildId=e.body[0].id),t.loadBuildArtifact=!1}))},initData:function(t,e){this.activeName="reinforce",this.buildId="",this.application=t,this.cdJob=e,this.channelType=0,this.channelGroup=[],this.setTimer(),this.fetchData(),this.getBuildArtifact()},handlerRowOpenBuildUrl:function(t){window.open(t.jobBuildUrl)},handlerRowOpenBuildDetails:function(t){var e=window.location.host,a=window.location.href.split("://")[0],i=a+"://"+e+"/#/job/build/android/reinforce?buildId="+t.id;D["a"].open(i)},handlerBuild:function(){var t=this;this.building=!0,this.buildParam.paramMap["channelType"]=this.channelType,0!==this.channelType&&(this.buildParam.paramMap["channelGroup"]=JSON.stringify(this.channelGroup));var e={cdJobId:this.cdJob.id,ciBuildId:this.buildId,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:this.buildParam.paramMap};Object(Bt["b"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={cdJobId:this.cdJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Bt["g"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},mi=pi,bi=(a("9ffc"),function(t){t.options.__source="src/components/opscloud/build/AndroidReinforceJobBuildDialog.vue"}),fi=bi,hi=Object(h["a"])(mi,si,ci,!1,null,null,null);"function"===typeof fi&&fi(hi);var gi=hi.exports,vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[a("el-select",{staticStyle:{display:"inline-block","max-width":"200px","margin-left":"10px"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索用户","remote-method":t.getUser,loading:t.searchLoading},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.username))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v(t._s(e.displayName))])])})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:""===t.userId,plain:"",size:"mini"},on:{click:function(e){return t.grantUser()}}},[t._v("授权 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"displayName",label:"显示名"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"ADMIN"===e.row.userPermission.roleName?"danger":"success",size:"small"}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"管理员":"用户")+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.handlerRowUpdatePermission(e.row)}}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"降权":"提权")+" ")]),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handlerRowRevokeUser(e.row)}}},[t._v("撤销")])]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},yi=[],wi=a("7648"),xi={data:function(){return{title:"任务授权管理",application:{},ciJob:{},tableData:[],loading:!1,searchLoading:!1,userId:"",userOptions:[],pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:""}}},name:"CiJobPermissionDialog",props:["formStatus"],mixins:[],mounted:function(){},methods:{initData:function(t){this.ciJob=t,this.userId="",this.pagination.currentPage=1,this.getUser(""),console.log(t),this.fetchData()},getUser:function(t){var e=this;this.searchLoading=!0;var a={queryName:t,applicationId:this.ciJob.applicationId,ciJobId:this.ciJob.id,page:1,length:10};Object(wi["a"])(a).then((function(t){e.userOptions=t.body.data,e.searchLoading=!1}))},closeDialog:function(){this.formStatus.visible=!1},handleClick:function(){this.$emit("input",!this.value)},grantUser:function(){var t=this;setTimeout((function(){Object(d["h"])(t.ciJob.id,t.userId).then((function(e){t.$message({message:"成功",type:"success"}),t.userId="",t.getUser(""),t.fetchData()}))}),30)},handlerRowRevokeUser:function(t){var e=this;setTimeout((function(){Object(d["u"])(e.ciJob.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.getUser(""),e.fetchData()}))}),30)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,applicationId:this.ciJob.applicationId,ciJobId:this.ciJob.id,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(wi["b"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},_i=xi,Si=function(t){t.options.__source="src/components/opscloud/application/CiJobPermissionDialog.vue"},ki=Si,Oi=Object(h["a"])(_i,vi,yi,!1,null,null,null);"function"===typeof ki&&ki(Oi);var Di=Oi.exports,Ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-popover",{attrs:{placement:"top-start",trigger:"hover",width:"400"}},[a("el-row",{attrs:{gutter:10}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v("可靠性")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.handlerOpenUrl}},[t._v("跳转详情页面")])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.bugs.value))]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("Bugs")])])],1),null!=t.sonarQube.measures.new_bugs?a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.new_bugs.periods[0].value)+" ")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("新增Bugs")])])],1):t._e()],1),a("el-row",{attrs:{gutter:10}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v("安全性")])]),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.vulnerabilities.value)+" ")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("漏洞")])])],1),null!=t.sonarQube.measures.new_vulnerabilities?a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.new_vulnerabilities.periods[0].value)+" ")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("新增漏洞")])])],1):t._e()],1),a("el-row",{attrs:{gutter:10}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v("覆盖率")])]),a("el-row",{attrs:{gutter:10}},[a("el-col",[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.coverage.value)+"%")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("覆盖率")])])],1)],1),a("el-row",{attrs:{gutter:10}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v("重复")])]),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.duplicated_lines_density.value)+"% ")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("重复度")])])],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.duplicated_blocks.value)+" ")]),a("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("重复块")])])],1)],1),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[a("img",{attrs:{src:t.sonarQube.alertStatus}})])],1)],1)},ji=[],Ti={name:"SonarPopover",data:function(){return{}},props:["sonarQube"],methods:{handlerOpenUrl:function(){D["a"].open(this.sonarQube.projectUrl)}}},Ci=Ti,Ii=function(t){t.options.__source="src/components/opscloud/build/sonar/SonarPopover.vue"},Bi=Ii,Ni=Object(h["a"])(Ci,Ji,ji,!1,null,"affc5a44",null);"function"===typeof Bi&&Bi(Ni);var Pi=Ni.exports;function Ei(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function $i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ei(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ei(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var zi={visible:!1},qi={name:"MyCiJobTable",data:function(){return{application:"",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{instanceId:"",queryName:""},formCiJobStatus:{visible:!1,operationType:!0,addTitle:"新增任务配置",updateTitle:"更新任务配置"},formCdJobStatus:{visible:!1,operationType:!0,addTitle:"新增部署任务配置",updateTitle:"更新部署任务配置"},formEngineStatus:Object.assign({},zi),formH5BuildStatus:Object.assign({},zi),formJavaBuildStatus:Object.assign({},zi),formJavaDeployStatus:Object.assign({},zi),formIOSBuildStatus:Object.assign({},zi),formPythonBuildStatus:Object.assign({},zi),formAndroidBuildStatus:Object.assign({},zi),formAndroidReinforceBuildStatus:Object.assign({},zi),formXtermStatus:Object.assign({},zi),formBuildOutputStatus:Object.assign({},zi),formPermissionStatus:Object.assign({},zi),labelWidth:"100px"}},computed:$i({},Object(s["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize()},beforeDestroy:function(){},components:{JenkinsNodeXTerm:z,CiJobDialog:bt,CdJobDialog:Tt,JobEngineDialog:qt,H5JobBuildDialog:aa,JavaJobBuildDialog:ua,JavaJobDeployDialog:Pa,IOSJobBuildDialog:Ua,PythonJobBuildDialog:Ya,AndroidJobBuildDialog:li,AndroidReinforceJobBuildDialog:gi,ViewJobBuildOutput:Ht,CiJobPermissionDialog:Di,SonarPopover:Pi},methods:$i({},Object(s["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},initData:function(t){this.application=t,this.queryParam.queryName="",this.fetchData()},handlerAdd:function(){var t={id:"",applicationId:this.application.id,jobTpl:null,name:"",jobKey:"",branch:"",envType:0,jotTplId:"",jobType:"",enableTag:!1,enableSonar:!1,parameterYaml:"",jobBuildNumber:0,hide:!1,deploymentJobId:0,atAll:!1,dingtalk:null,dingtalkId:"",bucket:null,ossBucketId:"",scmMemberId:"",comment:""};this.formCiJobStatus.operationType=!0,this.formCiJobStatus.visible=!0,this.$refs.ciJobDialog.initData(this.application,t)},handlerRowRunBuild:function(t){switch(t.jobType){case"HTML5":this.formH5BuildStatus.visible=!0,this.$refs.h5JobBuildDialog.initData(this.application,t);break;case"JAVA":this.formJavaBuildStatus.visible=!0,this.$refs.javaJobBuildDialog.initData(this.application,t);break;case"IOS":this.formIOSBuildStatus.visible=!0,this.$refs.iOSJobBuildDialog.initData(this.application,t);break;case"PYTHON":this.formPythonBuildStatus.visible=!0,this.$refs.pythonJobBuildDialog.initData(this.application,t);break;case"ANDROID":this.formAndroidBuildStatus.visible=!0,this.$refs.androidJobBuildDialog.initData(this.application,t);break;default:this.$message.error("构建任务类型配置错误!")}},handlerRowRunDeployment:function(t){switch(null===t.cdJob&&this.$message.error("部署任务未创建!"),t.cdJob.jobType){case"ANDROID_REINFORCE":this.formAndroidReinforceBuildStatus.visible=!0,this.$refs.androidReinforceJobBuildDialog.initData(this.application,t.cdJob);break;case"JAVA_DEPLOYMENT":this.formJavaDeployStatus.visible=!0,this.$refs.javaJobDeployDialog.initData(this.application,t.cdJob);break;default:this.$message.error("部署任务类型配置错误!")}},handlerRowDeploymentEdit:function(t){if(null===t.cdJob){var e={id:"",ciJobId:t.id,applicationId:t.applicationId,jobTpl:null,name:"",jobKey:"",envType:0,jotTplId:"",jobType:"",parameterYaml:"",jobBuildNumber:0,comment:""};this.formCdJobStatus.operationType=!0,this.$refs.cdJobDialog.initData(this.application,e)}else this.formCdJobStatus.operationType=!1,this.$refs.cdJobDialog.initData(this.application,Object.assign({},t.cdJob));this.formCdJobStatus.visible=!0},handlerRowPermissionEdit:function(t){this.formPermissionStatus.visible=!0,this.$refs.ciJobPermissionDialog.initData(Object.assign({},t))},handlerRowEngineEdit:function(t){var e={ciJobId:t.id,cdJobId:null!==t.cdJob?t.cdJob.id:null};this.formEngineStatus.visible=!0,this.$refs.jobEngineDialog.initData(e)},handlerRowEdit:function(t){this.formCiJobStatus.operationType=!1,this.formCiJobStatus.visible=!0,this.$refs.ciJobDialog.initData(this.application,Object.assign({},t))},handlerOpenXTerm:function(t){this.formXtermStatus.visible=!0,this.$refs.xtermDialog.initData(t)},handlerAbortBuild:function(t){var e=this;Object(Bt["a"])(t[0].buildId).then((function(t){t.success?e.$message({message:"执行成功（请等待）!",type:"success"}):e.$message.error(t.msg)}))},handlerOpenViewBuildOutput:function(t){this.formBuildOutputStatus.visible=!0,this.$refs.viewJobBuildOutput.initData(0,t[0].buildId)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;if(""!==this.application){0===this.tableData.length&&(this.loading=!0);var e={applicationId:this.application.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};tt(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}})},Ri=qi,Ai=(a("b1c9"),function(t){t.options.__source="src/components/opscloud/application/MyCiJobTable.vue"}),Mi=Ai,Li=Object(h["a"])(Ri,_,S,!1,null,null,null);"function"===typeof Mi&&Mi(Li);var Ui=Li.exports,Wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[a("el-input",{staticClass:"input",attrs:{disabled:"",placeholder:"应用名称"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name","string"===typeof e?e.trim():e)},expression:"application.name"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.jobKey,placement:"top-start"}},[a("span",[t._v(t._s(e.row.name))])]),a("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return a("span",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}])}),a("el-table-column",{attrs:{prop:"env",label:"环境",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{style:{color:e.row.env.color},attrs:{"disable-transitions":""}},[t._v(t._s(e.row.env.envName))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"最新构建",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",t._l(e.row.buildViews,(function(e){return a("el-button",{key:e.buildNumber,style:{backgroundColor:e.color,color:"#FFFFFF",width:"50px"}},[a("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[a("el-form",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.executors.length>0,expression:"item.executors.length > 0"}]},[a("el-tag",{attrs:{type:"primary"}},[t._v("构建日志 "),a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerOpenViewBuildOutput(e.executors)}}},[a("span",{staticStyle:{color:"#535353"}},[t._v("查看")])])],1),a("el-divider"),t._l(e.executors,(function(e){return a("div",{key:e.id},[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp)+" "),a("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handlerOpenXTerm(e)}}},[a("span",{staticStyle:{color:"#535353"}},[t._v("打开终端")])])],1)],1)}))],2),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.executors.length,expression:"item.executors.length === 0"}]},[t._v(" No Executors ")])]),a("span",{attrs:{slot:"reference"},slot:"reference"},[e.building?a("i",{staticClass:"el-icon-loading"}):t._e(),t._v(t._s(e.buildNumber))])],1)],1)})),1)]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",{staticStyle:{"margin-right":"5px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.row.deploymentJobId,expression:"scope.row.deploymentJobId !== 0"}],attrs:{type:"primary",icon:"fa fa-cloud-upload"},on:{click:function(a){return t.handlerRowRunDeployment(e.row)}}})],1),a("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(a){return t.handlerRowDeploymentEdit(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"fa fa-plane"}},[a("span",{on:{click:function(a){return t.handlerRowEngineEdit(e.row)}}},[t._v("工作引擎")])]),a("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[a("span",[t._v("权限配置")])])],1)],1)]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),a("cd-job-dialog",{ref:"cdJobDialog",attrs:{formStatus:t.formCdJobStatus},on:{closeDialog:t.fetchData}}),a("job-engine-dialog",{ref:"jobEngineDialog",attrs:{formStatus:t.formEngineStatus}}),a("android-reinforce-job-build-dialog",{ref:"androidReinforceJobBuildDialog",attrs:{formStatus:t.formAndroidReinforceBuildStatus}}),a("java-job-deploy-dialog",{ref:"javaJobDeployDialog",attrs:{formStatus:t.formJavaDeployStatus}}),a("jenkins-node-x-term",{ref:"xtermDialog",attrs:{formStatus:t.formXtermStatus},on:{openXTerm:t.handlerOpenXTerm}}),a("view-job-build-output",{ref:"viewJobBuildOutput",attrs:{formStatus:t.formBuildOutputStatus}})],1)},Fi=[];function Gi(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Hi(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Gi(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gi(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Vi={name:"MyCdJobTable",data:function(){return{application:"",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{instanceId:"",queryName:""},formCiJobStatus:{visible:!1,operationType:!0,addTitle:"新增任务配置",updateTitle:"更新任务配置"},formCdJobStatus:{visible:!1,operationType:!0,addTitle:"新增部署任务配置",updateTitle:"更新部署任务配置"},formEngineStatus:{visible:!1},formAndroidReinforceBuildStatus:{visible:!1},formJavaDeployStatus:{visible:!1},formXtermStatus:{visible:!1},formBuildOutputStatus:{visible:!1}}},computed:Hi({},Object(s["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize()},beforeDestroy:function(){},components:{JenkinsNodeXTerm:z,CdJobDialog:Tt,JobEngineDialog:qt,AndroidReinforceJobBuildDialog:gi,JavaJobDeployDialog:Pa,ViewJobBuildOutput:Ht},methods:Hi({},Object(s["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},initData:function(t){this.application=t,this.fetchData()},handlerRowRunDeployment:function(t){switch(t.jobType){case"ANDROID_REINFORCE":this.formAndroidReinforceBuildStatus.visible=!0,this.$refs.androidReinforceJobBuildDialog.initData(this.application,t);break;case"JAVA_DEPLOYMENT":this.formJavaDeployStatus.visible=!0,this.$refs.javaJobDeployDialog.initData(this.application,t);break;default:this.$message.error("部署任务类型配置错误!")}},handlerRowDeploymentEdit:function(t){this.formCdJobStatus.operationType=!1,this.$refs.cdJobDialog.initData(this.application,Object.assign({},t)),this.formCdJobStatus.visible=!0},handlerRowEngineEdit:function(t){var e={ciJobId:t.ciJobId,cdJobId:t.id};this.formEngineStatus.visible=!0,this.$refs.jobEngineDialog.initData(e)},handlerOpenXTerm:function(t){this.formXtermStatus.visible=!0,this.$refs.xtermDialog.initData(t)},handlerOpenViewBuildOutput:function(t){this.formBuildOutputStatus.visible=!0,this.$refs.viewJobBuildOutput.initData(1,t[0].buildId)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;if(""!==this.application){0===this.tableData.length&&(this.loading=!0);var e={applicationId:this.application.id,queryName:this.queryParam.queryName,page:this.pagination.currentPage,length:this.pagination.pageSize};vt(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}})},Xi=Vi,Ki=(a("b852"),function(t){t.options.__source="src/components/opscloud/application/MyCdJobTable.vue"}),Yi=Ki,Qi=Object(h["a"])(Xi,Wi,Fi,!1,null,null,null);"function"===typeof Yi&&Yi(Qi);var Zi=Qi.exports,tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.announcementCarousel.isShow,expression:"announcementCarousel.isShow"}],staticStyle:{"margin-bottom":"10px"}},[a("el-carousel",{attrs:{trigger:"click",height:"150px",interval:1e4}},t._l(t.announcementCarousel.announcements,(function(e){return a("el-carousel-item",{key:e.id},[a("h3",{staticClass:"small"},[t._v(t._s(e.title))]),a("p",{staticStyle:{"margin-left":"50px","font-size":"14px"},domProps:{innerHTML:t._s(e.content)}})])})),1)],1)},en=[],an="/announcement";function nn(){return Object(Q["a"])({url:an+"/carousel/query",method:"get"})}var on={name:"AnnouncementCarousel",data:function(){return{announcementCarousel:{}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;nn().then((function(e){t.announcementCarousel=e.body}))}}},rn=on,ln=(a("9c4d"),function(t){t.options.__source="src/components/opscloud/announcement/AnnouncementCarousel.vue"}),sn=ln,cn=Object(h["a"])(rn,tn,en,!1,null,null,null);"function"===typeof sn&&sn(cn);var un=cn.exports,dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},t._l(t.status.blockPlatforms,(function(e){return a("div",{key:e.id,staticStyle:{"margin-bottom":"10px"}},[a("el-alert",{attrs:{title:e.comment,type:"warning","show-icon":""}},[t._v("封网时间 "+t._s(e.startTime)+" - "+t._s(e.endTime))])],1)})),0)])},pn=[],mn="/platform";function bn(){return Object(Q["a"])({url:mn+"/block/status/query",method:"get"})}var fn={name:"BlockPlatformStatus",data:function(){return{status:{blockPlatforms:[]},isShow:!0}},mounted:function(){this.fetchData()},components:{},methods:{fetchData:function(){var t=this;bn().then((function(e){t.status=e.body,t.isShow=t.status.show}))}}},hn=fn,gn=function(t){t.options.__source="src/components/opscloud/platform/BlockPlatformStatus.vue"},vn=gn,yn=Object(h["a"])(hn,dn,pn,!1,null,"158a118e",null);"function"===typeof vn&&vn(yn);var wn=yn.exports,xn={data:function(){return{title:"我的应用",buildType:!0,timer:null,intervalTime:12e3}},components:{MyApplicationTable:w,JenkinsEngineStatus:x["a"],MyCiJobTable:Ui,MyCdJobTable:Zi,AnnouncementCarousel:un,BlockPlatformStatus:wn},beforeDestroy:function(){clearInterval(this.timer)},mounted:function(){},methods:{setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.buildType?t.$refs.myCiJobTable.fetchData():t.$refs.myCdJobTable.fetchData()}),this.intervalTime))},handlerSwitch:function(){this.buildType=!this.buildType},handlerSelApplication:function(t){this.$refs.myCiJobTable.initData(t),this.$refs.myCdJobTable.initData(t),this.setTimer()}}},_n=xn,Sn=(a("adf7"),function(t){t.options.__source="src/pages/workbench/continuous-integration/index.vue"}),kn=Sn,On=Object(h["a"])(_n,i,n,!1,null,null,null);"function"===typeof kn&&kn(On);e["default"]=On.exports},"61df":function(t,e,a){"use strict";var i=a("d2ac"),n=a.n(i);n.a},"65ce":function(t,e,a){"use strict";a.d(e,"j",(function(){return o})),a.d(e,"o",(function(){return r})),a.d(e,"w",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"v",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"c",(function(){return p})),a.d(e,"r",(function(){return m})),a.d(e,"l",(function(){return b})),a.d(e,"e",(function(){return f})),a.d(e,"m",(function(){return h})),a.d(e,"i",(function(){return g})),a.d(e,"b",(function(){return v})),a.d(e,"q",(function(){return y})),a.d(e,"g",(function(){return w})),a.d(e,"t",(function(){return x})),a.d(e,"x",(function(){return _})),a.d(e,"p",(function(){return S})),a.d(e,"n",(function(){return k})),a.d(e,"d",(function(){return O})),a.d(e,"s",(function(){return D})),a.d(e,"h",(function(){return J})),a.d(e,"u",(function(){return j}));var i=a("9bd2"),n="/application";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/my/page/query",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/my/rate/update",method:"put",data:t})}function s(t){return Object(i["a"])({url:n+"/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:n+"/update",method:"put",data:t})}function u(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}function d(t){return Object(i["a"])({url:n+"/scm/member/query?applicationId="+t,method:"get"})}function p(t,e){return Object(i["a"])({url:n+"/scm/member/add?applicationId="+t+"&projectId="+e,method:"put"})}function m(t){return Object(i["a"])({url:n+"/scm/member/remove?id="+t,method:"delete"})}function b(t){return Object(i["a"])({url:n+"/scm/member/branch/query",method:"post",data:t})}function f(t){return Object(i["a"])({url:n+"/scm/member/branch/create",method:"post",data:t})}function h(t){return Object(i["a"])({url:n+"/scm/member/branch/commit/query",method:"post",data:t})}function g(t){return Object(i["a"])({url:n+"/engine/query?applicationId="+t,method:"get"})}function v(t,e){return Object(i["a"])({url:n+"/engine/add?applicationId="+t+"&jenkinsInstanceId="+e,method:"put"})}function y(t){return Object(i["a"])({url:n+"/engine/remove?id="+t,method:"delete"})}function w(t,e){return Object(i["a"])({url:n+"/user/grant?applicationId="+t+"&userId="+e,method:"put"})}function x(t,e){return Object(i["a"])({url:n+"/user/revoke?applicationId="+t+"&userId="+e,method:"delete"})}function _(t,e){return Object(i["a"])({url:n+"/user/permission/update?applicationId="+t+"&userId="+e,method:"put"})}function S(t){return Object(i["a"])({url:n+"/server/group/page/query",method:"post",data:t})}function k(t){return Object(i["a"])({url:n+"/server/group/query?applicationId="+t,method:"get"})}function O(t){return Object(i["a"])({url:n+"/server/group/add",method:"put",data:t})}function D(t){return Object(i["a"])({url:n+"/server/group/remove?id="+t,method:"delete"})}function J(t,e){return Object(i["a"])({url:n+"/build/job/user/grant?ciJobId="+t+"&userId="+e,method:"put"})}function j(t,e){return Object(i["a"])({url:n+"/build/job/user/revoke?ciJobId="+t+"&userId="+e,method:"delete"})}},6889:function(t,e,a){},7439:function(t,e,a){},7648:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return s}));var i=a("9bd2"),n="/user/application";function o(t){return Object(i["a"])({url:n+"/exclude/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/include/page/query",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/build/job/exclude/page/query",method:"post",data:t})}function s(t){return Object(i["a"])({url:n+"/build/job/include/page/query",method:"post",data:t})}},"7acb":function(t,e,a){},"7d80":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return c}));var i=a("9bd2"),n="/jenkins/instance";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/add",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/update",method:"put",data:t})}function s(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}function c(t){return Object(i["a"])({url:n+"/active/set?id="+t,method:"get"})}},"81ce":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[a("el-select",{staticStyle:{display:"inline-block","max-width":"200px","margin-left":"10px"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索用户","remote-method":t.getUser,loading:t.searchLoading},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.username))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v(t._s(e.displayName))])])})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:""===t.userId,plain:"",size:"mini"},on:{click:function(e){return t.grantUser()}}},[t._v("授权 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"displayName",label:"显示名"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"ADMIN"===e.row.userPermission.roleName?"danger":"success",size:"small"}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"管理员":"用户")+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.handlerRowUpdatePermission(e.row)}}},[t._v(t._s("ADMIN"===e.row.userPermission.roleName?"降权":"提权"))]),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handlerRowRevokeUser(e.row)}}},[t._v("撤销")])]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},n=[],o=a("7648"),r=a("65ce"),l={data:function(){return{title:"应用授权管理",application:{},tableData:[],loading:!1,searchLoading:!1,userId:"",userOptions:[],pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:""}}},name:"ApplicationPermissionDialog",props:["formStatus"],mixins:[],mounted:function(){},methods:{initData:function(t){this.application=t,this.userId="",this.pagination.currentPage=1,this.getUser(""),this.fetchData()},getUser:function(t){var e=this;this.searchLoading=!0;var a={queryName:t,applicationId:this.application.id,page:1,length:10};Object(o["c"])(a).then((function(t){e.userOptions=t.body.data,e.searchLoading=!1}))},closeDialog:function(){this.formStatus.visible=!1},handleClick:function(){this.$emit("input",!this.value)},grantUser:function(){var t=this;setTimeout((function(){Object(r["g"])(t.application.id,t.userId).then((function(e){t.$message({message:"成功",type:"success"}),t.userId="",t.getUser(""),t.fetchData()}))}),30)},handlerRowUpdatePermission:function(t){var e=this;setTimeout((function(){Object(r["x"])(e.application.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.userId="",e.getUser(""),e.fetchData()}))}),30)},handlerRowRevokeUser:function(t){var e=this;setTimeout((function(){Object(r["t"])(e.application.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.getUser(""),e.fetchData()}))}),30)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,applicationId:this.application.id,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(o["d"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},s=l,c=a("2877"),u=function(t){t.options.__source="src/components/opscloud/application/ApplicationPermissionDialog.vue"},d=u,p=Object(c["a"])(s,i,n,!1,null,null,null);"function"===typeof d&&d(p);e["a"]=p.exports},"822b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:null!==t.buildTime&&""!==t.buildTime,expression:"buildTime !== null && buildTime !== ''"}],staticClass:"label"},[t._v("构建时长")]),t._v(" "+t._s(t.buildTime))]),a("div",[a("span",{staticClass:"label"},[t._v("开始时间")]),t._v(" "+t._s(t.startTime))]),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:null!==t.endTime&&""!==t.endTime,expression:"endTime !== null && endTime !== ''"}],staticClass:"label"},[t._v("结束时间")]),t._v(" "+t._s(t.endTime))])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[a("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},n=[],o={name:"BuildTimes",data:function(){return{}},props:["buildTime","startTime","endTime"],filters:{},mounted:function(){},methods:{}},r=o,l=(a("4205"),a("2877")),s=function(t){t.options.__source="src/components/opscloud/build/summary/BuildTimes.vue"},c=s,u=Object(l["a"])(r,i,n,!1,null,null,null);"function"===typeof c&&c(u);e["a"]=u.exports},8474:function(t,e,a){"use strict";var i=a("ac3e"),n=a.n(i);n.a},8513:function(t,e,a){},"877f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.artifacts&&t.artifacts.length>0,expression:"artifacts !== null && artifacts.length > 0"}],staticClass:"tag-group"},t._l(t.artifacts,(function(e){return a("div",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[a("b",{staticClass:"label"},[t._v(t._s(e.artifactFileName))])]),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.artifactFileSize))])])],1)})),0),a("span",{directives:[{name:"show",rawName:"v-show",value:null===t.artifacts||0===t.artifacts.length,expression:"artifacts === null || artifacts.length === 0"}]},[t._v("No Artifacts")])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[a("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},n=[],o={name:"BuildArtifacts",data:function(){return{}},props:["artifacts"],filters:{},mounted:function(){},methods:{}},r=o,l=(a("3452"),a("2877")),s=function(t){t.options.__source="src/components/opscloud/build/summary/BuildArtifacts.vue"},c=s,u=Object(l["a"])(r,i,n,!1,null,"6132f5ca",null);"function"===typeof c&&c(u);e["a"]=u.exports},8956:function(t,e,a){"use strict";var i=a("f2a8"),n=a.n(i);n.a},"8a7d":function(t,e,a){"use strict";var i=a("8f76"),n=a.n(i);n.a},"8b7e":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return l}));var i=a("9bd2"),n="/gitlab/project";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}function l(t){return Object(i["a"])({url:n+"/sync?instanceId="+t,method:"get"})}},"8f76":function(t,e,a){},"97ca":function(t,e,a){},"9c4d":function(t,e,a){"use strict";var i=a("bdbd"),n=a.n(i);n.a},"9fbf":function(t,e,a){},"9ffc":function(t,e,a){"use strict";var i=a("c373"),n=a.n(i);n.a},a00b:function(t,e,a){},a225:function(t,e,a){},a92b:function(t,e,a){"use strict";var i=a("8513"),n=a.n(i);n.a},ac3e:function(t,e,a){},adc0:function(t,e,a){"use strict";var i=a("7acb"),n=a.n(i);n.a},adf7:function(t,e,a){"use strict";var i=a("a00b"),n=a.n(i);n.a},b1c9:function(t,e,a){"use strict";var i=a("f8b1"),n=a.n(i);n.a},b255:function(t,e,a){},b3eb:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"应用配置",name:"application"}},[a("el-form",{attrs:{model:t.application}},[a("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth,required:!0}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),a("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth,required:!0}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!t.formStatus.operationType},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}},[a("template",{slot:"append"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerBuildKey}},[a("i",{staticClass:"fa fa-arrow-up",attrs:{"aria-hidden":"true"}})])],1)],2)],1),a("el-form-item",{attrs:{label:"GitFlow","label-width":t.labelWidth}},[a("el-checkbox",{model:{value:t.application.enableGitflow,callback:function(e){t.$set(t.application,"enableGitflow",e)},expression:"application.enableGitflow"}},[t._v("启用")])],1),a("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.application.comment,callback:function(e){t.$set(t.application,"comment",e)},expression:"application.comment"}})],1)],1)],1),""!==t.application.id?a("el-tab-pane",{attrs:{label:"SCM配置",name:"scm"}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[a("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"搜索实例","remote-method":t.getGitlabInstance},on:{change:t.handlerSelGitlabInstance},model:{value:t.queryGitlabParam.instanceId,callback:function(e){t.$set(t.queryGitlabParam,"instanceId",e)},expression:"queryGitlabParam.instanceId"}},t._l(t.gitlabInstanceOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"",disabled:""===t.queryGitlabParam.instanceId,remote:"","reserve-keyword":"",placeholder:"搜索项目","remote-method":t.getProject},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.projectOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticStyle:{float:"left","margin-right":"15px"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.sshUrl))])])})),1),a("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.projectId},on:{click:t.handlerScmMemberAdd}},[t._v("添加")])],1),a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.scmMemberLoading,expression:"scmMemberLoading"}],staticStyle:{width:"100%"},attrs:{data:t.scmMembers}},[a("el-table-column",{attrs:{prop:"scmType",label:"SCM类型",width:"100"}}),a("el-table-column",{attrs:{prop:"scmSshUrl",label:"sshUrl",width:"300"}}),a("el-table-column",{attrs:{prop:"tags",label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return a("span",{key:e.id},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[a("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}],null,!1,726257749)}),a("el-table-column",{attrs:{prop:"comment",label:"描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handlerScmMemberRowRemove(e.row)}}},[t._v("移除")])]}}],null,!1,1935080429)})],1)],1)],1):t._e(),""!==t.application.id?a("el-tab-pane",{attrs:{label:"服务器组(可选)",name:"serverGroup"}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[a("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"","reserve-keyword":""},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},t._l(t.sourceTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"","value-key":"id",remote:"","reserve-keyword":"",placeholder:"搜索服务器组","remote-method":t.getServerGroup},model:{value:t.serverGroup,callback:function(e){t.serverGroup=e},expression:"serverGroup"}},t._l(t.serverGroupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}},[a("span",{staticStyle:{float:"left","margin-right":"15px"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.comment))])])})),1),a("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.serverGroup},on:{click:t.handlerServerGroupAdd}},[t._v("添加 ")])],1),a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.applicationServerGroupLoading,expression:"applicationServerGroupLoading"}],staticStyle:{width:"100%"},attrs:{data:t.serverGroups}},[a("el-table-column",{attrs:{prop:"source",label:"数据源",width:"100"}}),a("el-table-column",{attrs:{prop:"serverGroupName",label:"服务器组名称",width:"300"}}),a("el-table-column",{attrs:{prop:"comment",label:"描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handlerServerGroupRowRemove(e.row)}}},[t._v("移除 ")])]}}],null,!1,142187386)})],1)],1)],1):t._e(),""!==t.application.id?a("el-tab-pane",{attrs:{label:"工作引擎",name:"engine"}},[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[a("el-select",{staticClass:"select",attrs:{clearable:"",placeholder:"引擎类型"},on:{change:t.handlerSelEngineType},model:{value:t.application.engineType,callback:function(e){t.$set(t.application,"engineType",e)},expression:"application.engineType"}},t._l(t.engineTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:1===t.application.engineType,expression:"application.engineType === 1"}],staticClass:"select",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"搜索实例","remote-method":t.getJenkinsInstance},model:{value:t.jenkinsInstanceId,callback:function(e){t.jenkinsInstanceId=e},expression:"jenkinsInstanceId"}},t._l(t.jenkinsInstanceOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.jenkinsInstanceId},on:{click:t.handlerEngineAdd}},[t._v("添加 ")])],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===t.application.engineType,expression:"application.engineType === 1"}],staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.engineLoading,expression:"engineLoading"}],attrs:{data:t.engines}},[a("el-table-column",{attrs:{prop:"instance",label:"实例名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.instance.name))])]}}],null,!1,593344902)}),a("el-table-column",{attrs:{prop:"instance",label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.instance.comment))])]}}],null,!1,2974055794)}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return t.handlerEngineRowRemove(e.row)}}},[t._v("移除")])]}}],null,!1,1805247854)})],1)],1)],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},n=[],o=(a("b0c0"),a("e68b")),r=a("8b7e"),l=a("7d80"),s=a("65ce"),c=[{value:0,label:"所有引擎"},{value:1,label:"指定引擎"}],u=[{value:"LOCAL",label:"本地数据源"},{value:"OPSCLOUD",label:"OPSCLOUD"}],d={data:function(){return{activeName:"application",application:{},labelWidth:"150px",options:{stripe:!0},serverLoading:!1,serverOptions:[],scmMembers:[],scmMemberLoading:!1,gitlabInstanceOptions:[],queryGitlabParam:{instanceId:"",queryName:""},projectId:"",projectOptions:[],queryJenkinsParam:{queryName:""},sourceType:"OPSCLOUD",sourceTypeOptions:u,serverGroup:"",serverGroupOptions:[],applicationServerGroupLoading:!1,serverGroups:[],jenkinsInstanceId:"",engineLoading:!1,engines:[],engineTypeOptions:c,jenkinsInstanceOptions:[]}},name:"ApplicationDialog",props:["formStatus"],components:{},mounted:function(){},methods:{initData:function(t){this.application=t,""!==t.id&&(this.getScmMember(),this.getGitlabInstance(""),1===this.application.engineType&&this.getEngine(),null!==t.serverGroups&&t.serverGroups.length>0&&(this.serverGroups=t.serverGroups))},handleClick:function(){this.$emit("input",!this.value)},getServerGroup:function(t){var e=this,a={source:this.sourceType,name:t,grpType:"",page:1,length:10};Object(s["p"])(a).then((function(t){e.serverGroupOptions=t.body.data}))},getEngine:function(){var t=this;0===this.application.engineType?this.engines=[]:(this.engineLoading=!0,Object(s["i"])(this.application.id).then((function(e){e.success?t.engines=e.body:t.$message.error(e.msg),t.engineLoading=!1})))},getScmMember:function(){var t=this;this.scmMemberLoading=!0,Object(s["k"])(this.application.id).then((function(e){e.success?t.scmMembers=e.body:t.$message.error(e.msg),t.scmMemberLoading=!1}))},getApplicationServerGroup:function(){var t=this;this.applicationServerGroupLoading=!0,Object(s["n"])(this.application.id).then((function(e){e.success?t.serverGroups=e.body:t.$message.error(e.msg),t.applicationServerGroupLoading=!1}))},getJenkinsInstance:function(t){var e=this;this.loading=!0;var a={queryName:t,extend:1,page:1,length:10};Object(l["c"])(a).then((function(t){e.jenkinsInstanceOptions=t.body.data}))},getGitlabInstance:function(t){var e=this,a={queryName:t,extend:0,page:1,length:10};Object(o["c"])(a).then((function(t){e.gitlabInstanceOptions=t.body.data}))},handlerSelGitlabInstance:function(){this.getProject("")},getProject:function(t){var e=this,a={instanceId:this.queryGitlabParam.instanceId,queryName:t,extend:1,page:1,length:10};Object(r["b"])(a).then((function(t){e.projectOptions=t.body.data}))},handlerBuildKey:function(){this.application.applicationKey=this.application.name.toUpperCase()},handlerSelEngineType:function(){1===this.application.engineType&&this.getJenkinsInstance("")},handlerEngineAdd:function(){var t=this;Object(s["b"])(this.application.id,this.jenkinsInstanceId).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.jenkinsInstanceId="",t.getEngine()):t.$message.error(e.msg)}))},handlerServerGroupAdd:function(){var t=this,e={id:"",applicationId:this.application.id,serverGroupName:this.serverGroup.name,serverGroupId:this.serverGroup.id,comment:this.serverGroup.comment,source:this.sourceType};Object(s["d"])(e).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.serverGroup="",t.getApplicationServerGroup()):t.$message.error(e.msg)}))},handlerScmMemberAdd:function(){var t=this;Object(s["c"])(this.application.id,this.projectId).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.projectId="",t.getScmMember()):t.$message.error(e.msg)}))},handlerEngineRowRemove:function(t){var e=this;Object(s["q"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getEngine()}))},handlerScmMemberRowRemove:function(t){var e=this;Object(s["r"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getScmMember()}))},handlerServerGroupRowRemove:function(t){var e=this;Object(s["s"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getApplicationServerGroup()}))},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.application);t.formStatus.operationType?Object(s["a"])(e).then((function(e){t.$message({message:"成功",type:"success"}),t.formStatus.visible=!1,t.$emit("closeDialog")})):Object(s["v"])(e).then((function(e){t.$message({message:"成功",type:"success"}),t.formStatus.visible=!1,t.$emit("closeDialog")}))}),600)}}},p=d,m=(a("c318"),a("2877")),b=function(t){t.options.__source="src/components/opscloud/application/ApplicationDialog.vue"},f=b,h=Object(m["a"])(p,i,n,!1,null,null,null);"function"===typeof f&&f(h);e["a"]=h.exports},b674:function(t,e,a){},b852:function(t,e,a){"use strict";var i=a("269b"),n=a.n(i);n.a},bb63:function(t,e,a){"use strict";var i=a("2d6d"),n=a.n(i);n.a},bdbd:function(t,e,a){},c318:function(t,e,a){"use strict";var i=a("5672"),n=a.n(i);n.a},c373:function(t,e,a){},c496:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return l}));var i=a("9bd2");function n(t,e,a,n){return Object(i["a"])({url:"/env/page/query?envName="+t+"&envType="+e+"&page="+a+"&length="+n,method:"get"})}function o(t){return Object(i["a"])({url:"/env/add",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/env/del?id="+t,method:"delete"})}function l(t){return Object(i["a"])({url:"/env/update",method:"put",data:t})}},c835:function(t,e,a){},d2ac:function(t,e,a){},df79:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return s}));var i=a("9bd2"),n="/aliyun/oss/bucket";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(){return Object(i["a"])({url:n+"/sync",method:"put"})}function l(t){return Object(i["a"])({url:n+"/active/set?id="+t,method:"put"})}function s(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}},e68b:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return s}));var i=a("9bd2"),n="/gitlab/instance";function o(t){return Object(i["a"])({url:n+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:n+"/add",method:"post",data:t})}function l(t){return Object(i["a"])({url:n+"/update",method:"put",data:t})}function s(t){return Object(i["a"])({url:n+"/del?id="+t,method:"delete"})}},e6e5:function(t,e,a){"use strict";var i=a("ed0f"),n=a.n(i);n.a},ec44:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.user.email,placement:"top-start"}},[a("b",{staticClass:"label"},[t._v(t._s(t.user.displayName))])]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.ago))])],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[a("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),a("el-row",[a("el-divider")],1)],1)},n=[],o={name:"BuildOperation",data:function(){return{}},props:["user","ago"],filters:{},mounted:function(){},methods:{}},r=o,l=(a("1219"),a("2877")),s=function(t){t.options.__source="src/components/opscloud/build/summary/BuildUser.vue"},c=s,u=Object(l["a"])(r,i,n,!1,null,"6a7f126a",null);"function"===typeof c&&c(u);e["a"]=u.exports},ec5e:function(t,e){ace.define("ace/snippets/yaml",["require","exports","module"],(function(t,e,a){"use strict";e.snippetText=void 0,e.scope="yaml"}))},ed0f:function(t,e,a){},f2a8:function(t,e,a){},f43e:function(t,e,a){},f8b1:function(t,e,a){}}]);